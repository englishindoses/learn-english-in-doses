<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Extra practice activities for all grammar topics - English in Doses">
  <title>Extra Practice Hub - English in Doses</title>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&family=Source+Code+Pro&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  
  <!-- Base Styles -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/activities.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <style>
    /* Extra Practice specific styles */
    /* Full Page Styles - Matching Home Layout */
    .home-container {
      max-width: 100%;
      margin: 0 auto;
      padding: 0;
      overflow-x: hidden;
    }

    .home-section {
      width: 100%;
      padding: 60px 5%;
      box-sizing: border-box;
    }

    .home-section-content {
      max-width: 1280px;
      margin: 0 auto;
    }
    
    /* Last Activity Section */
    .last-activity-section {
      background-color: var(--card-bg);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 5px 15px var(--shadow-color);
      border-left: 5px solid var(--accent-color);
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .section-title {
      font-size: 1.4rem;
      margin: 0;
      font-weight: 600;
    }
    
    .view-all-link {
      font-size: 0.9rem;
      color: var(--accent-color);
    }
    
    .activity-flex {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      align-items: flex-start;
    }
    
    .activity-info {
      flex: 1;
      min-width: 250px;
    }
    
    .activity-name {
      font-weight: 600;
      font-size: 1.2rem;
      margin-bottom: 5px;
    }
    
    .activity-date {
      font-size: 0.9rem;
      opacity: 0.7;
    }
    
    .activity-score {
      margin: 15px 0;
    }
    
    .score-display {
      display: inline-block;
      background-color: var(--bg-color);
      padding: 8px 15px;
      border-radius: 30px;
      font-weight: 600;
    }
    
    .score-perfect {
      background-color: #4caf5026;
      color: #4CAF50;
    }
    
    .score-good {
      background-color: #ff980026;
      color: #FF9800;
    }
    
    .score-needs-work {
      background-color: #f4433626;
      color: #F44336;
    }
    
    .action-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .action-button {
      flex: 1;
      min-width: 150px;
      padding: 10px 15px;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 600;
      text-align: center;
      transition: all 0.3s;
    }
    
    .primary-action {
      background-color: var(--accent-color);
      color: white;
    }
    
    .primary-action:hover {
      background-color: #2980b9;
      text-decoration: none;
      color: white;
    }
    
    .secondary-action {
      background-color: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-color);
    }
    
    .secondary-action:hover {
      background-color: var(--bg-color);
      text-decoration: none;
    }
    
    /* Challenge & Recommendation Row */
    .dual-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    /* Quick Challenge Section */
    .quick-challenge-section {
      background: linear-gradient(135deg, #3a6186 0%, #89253e 100%);
      color: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px var(--shadow-color);
    }
    
    .challenge-title {
      font-size: 1.4rem;
      font-weight: 700;
      margin-top: 0;
      margin-bottom: 15px;
      color: white;
    }
    
    .challenge-content {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      align-items: center;
    }
    
    .challenge-info {
      flex: 1;
      min-width: 250px;
    }
    
    .challenge-desc {
      opacity: 0.9;
      margin-bottom: 15px;
      font-size: 1.05rem;
    }
    
    .challenge-meta {
      display: flex;
      gap: 20px;
      font-size: 0.9rem;
      opacity: 0.8;
      margin-bottom: 20px;
    }
    
    .challenge-timer {
      background-color: rgba(0, 0, 0, 0.2);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      min-width: 120px;
    }
    
    .timer-value {
      font-size: 2.5rem;
      font-weight: 700;
      line-height: 1;
      margin-bottom: 5px;
    }
    
    .timer-label {
      font-size: 0.9rem;
      opacity: 0.8;
    }
    
    .challenge-button {
      background-color: white;
      color: #3a6186;
      padding: 10px 20px;
      border-radius: 4px;
      font-weight: 600;
      text-decoration: none;
      display: inline-block;
      transition: all 0.3s;
    }
    
    .challenge-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      text-decoration: none;
    }
    
    /* Recommendation Section */
    .recommendation-section {
      background-color: var(--card-bg);
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px var(--shadow-color);
      border-left: 5px solid #2196F3;
    }
    
    .recommendation-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin-top: 0;
      margin-bottom: 20px;
    }
    
    .recommendation-content {
      display: flex;
      flex-direction: column;
    }
    
    .recommendation-activity {
      margin-bottom: 15px;
    }
    
    .activity-icon {
      color: #2196F3;
      font-size: 1.5rem;
      margin-bottom: 10px;
    }
    
    .activity-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 10px;
    }
    
    .activity-description {
      margin-bottom: 15px;
    }
    
    .progress-bar-container {
      height: 10px;
      background-color: var(--progress-bg);
      border-radius: 5px;
      overflow: hidden;
      margin: 10px 0 15px;
    }
    
    .progress-bar-fill {
      height: 100%;
      background-color: #2196F3;
      width: 35%;
    }
    
    .progress-text {
      font-size: 0.9rem;
      opacity: 0.7;
      margin-bottom: 20px;
    }
    
    .recommendation-button {
      background-color: #2196F3;
      color: white;
      padding: 10px 20px;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 600;
      display: inline-block;
      transition: all 0.3s;
      align-self: flex-start;
    }
    
    .recommendation-button:hover {
      background-color: #0b7dda;
      transform: translateY(-3px);
      text-decoration: none;
      color: white;
    }
    
    /* Achievement Section */
    .achievement-section-content {
      background-color: #f3e5f5;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px var(--shadow-color);
      margin-bottom: 30px;
      border-left: 5px solid #9C27B0;
    }
    
    [data-theme="dark"] .achievement-section-content {
      background-color: #2a1e2f;
    }
    
    .achievement-content {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      align-items: center;
    }
    
    .achievement-info {
      flex: 1;
      min-width: 250px;
    }
    
    .achievement-icon {
      font-size: 3rem;
      color: #9C27B0;
      margin-bottom: 10px;
    }
    
    .achievement-name {
      font-size: 1.4rem;
      font-weight: 600;
      color: #9C27B0;
      margin-bottom: 10px;
    }
    
    .achievement-desc {
      margin-bottom: 10px;
      font-size: 1.05rem;
    }
    
    .achievement-date {
      font-size: 0.9rem;
      opacity: 0.7;
      margin-bottom: 20px;
    }
    
    .achievement-share {
      background-color: #9C27B0;
      color: white;
      padding: 10px 20px;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      transition: background-color 0.3s;
    }
    
    .achievement-share:hover {
      background-color: #7B1FA2;
      text-decoration: none;
      color: white;
    }
    
    .achievement-image {
      max-width: 150px;
      height: auto;
    }
    
    /* Search and Filter Section */
    .search-filter-section {
      margin-bottom: 30px;
    }
    
    .search-container {
      background-color: var(--card-bg);
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px var(--shadow-color);
    }
    
    .search-row {
      display: flex;
      margin-bottom: 20px;
    }
    
    .search-input-container {
      flex-grow: 1;
      position: relative;
    }
    
    .search-input {
      width: 100%;
      padding: 12px 15px 12px 45px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 1rem;
      background-color: var(--bg-color);
      color: var(--text-color);
    }
    
    .search-icon {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-color);
      opacity: 0.6;
      font-size: 1.2rem;
    }
    
    .filter-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .filter-select {
      padding: 10px 15px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      background-color: var(--bg-color);
      color: var(--text-color);
      min-width: 150px;
      font-size: 0.95rem;
      flex: 1;
    }
    
    /* Level Tabs */
    .level-tabs {
      display: flex;
      border-bottom: 2px solid var(--border-color);
      margin-bottom: 30px;
      overflow-x: auto;
      scroll-behavior: smooth;
    }
    
    .level-tab {
      padding: 15px 25px;
      font-weight: 600;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
      white-space: nowrap;
      color: var(--text-color);
      font-size: 1.1rem;
    }
    
    .level-tab:hover {
      background-color: var(--card-bg);
    }
    
    .level-tab.active {
      border-bottom-color: var(--accent-color);
      color: var(--accent-color);
    }
    
    .level-tab.beginner.active {
      border-bottom-color: #4CAF50;
      color: #4CAF50;
    }
    
    .level-tab.intermediate.active {
      border-bottom-color: #FF9800;
      color: #FF9800;
    }
    
    .level-tab.advanced.active {
      border-bottom-color: #F44336;
      color: #F44336;
    }
    
    /* Grammar in Context Section */
    .grammar-context-content {
      background-color: #e8f5e9;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 5px 15px var(--shadow-color);
      border-left: 5px solid #4CAF50;
    }
    
    [data-theme="dark"] .grammar-context-content {
      background-color: #1e2f1e;
    }
    
    .context-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: #4CAF50;
      margin-top: 0;
      margin-bottom: 20px;
    }
    
    .context-flex {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
    }
    
    .context-content {
      flex: 1;
      min-width: 250px;
    }
    
    .context-quote {
      background-color: white;
      padding: 20px;
      border-radius: 6px;
      margin-bottom: 15px;
      position: relative;
      font-style: italic;
      font-size: 1.1rem;
      line-height: 1.6;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    
    [data-theme="dark"] .context-quote {
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    .context-quote::before {
      content: '"';
      position: absolute;
      left: 10px;
      top: 0;
      font-size: 3rem;
      color: #4CAF50;
      opacity: 0.3;
      line-height: 1;
    }
    
    .highlighted-grammar {
      font-weight: 600;
      color: #4CAF50;
      text-decoration: underline;
      text-decoration-color: rgba(76, 175, 80, 0.4);
      text-decoration-thickness: 2px;
      text-underline-offset: 3px;
    }
    
    .context-source {
      font-size: 0.9rem;
      opacity: 0.7;
      text-align: right;
      margin-bottom: 20px;
    }
    
    .context-explanation {
      font-size: 1rem;
    }
    
    .context-actions {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 20px;
    }
    
    .refresh-button {
      background: none;
      border: none;
      color: #4CAF50;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 1rem;
      transition: opacity 0.3s;
      padding: 0;
    }
    
    .refresh-button:hover {
      opacity: 0.8;
    }
    
    .practice-button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 600;
      display: inline-block;
      transition: all 0.3s;
    }
    
    .practice-button:hover {
      background-color: #3d8b40;
      transform: translateY(-3px);
      text-decoration: none;
      color: white;
    }
    
    /* Practice Activities List */
    .practice-level-container {
      display: none;
    }
    
    .practice-level-container.active {
      display: block;
    }
    
    .practice-category {
      margin-bottom: 40px;
    }
    
    .category-title {
      font-size: 1.6rem;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border-color);
    }
    
    .activity-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 25px;
    }
    
    .activity-card {
      background-color: var(--card-bg);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 8px var(--shadow-color);
      transition: transform 0.3s, box-shadow 0.3s;
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    
    .activity-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px var(--shadow-color);
    }
    
    .activity-header {
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border-color);
    }
    
    .activity-card-title {
      font-weight: 600;
      font-size: 1.1rem;
      margin: 0;
    }
    
    .activity-badge {
      font-size: 0.8rem;
      padding: 4px 10px;
      border-radius: 20px;
      background-color: var(--accent-color);
      color: white;
    }
    
    .activity-badge.mcq {
      background-color: #4CAF50;
    }
    
    .activity-badge.gap-fill {
      background-color: #2196F3;
    }
    
    .activity-badge.transformation {
      background-color: #9C27B0;
    }
    
    .activity-badge.matching {
      background-color: #FF9800;
    }
    
    .activity-badge.drag-drop {
      background-color: #E91E63;
    }
    
    .activity-card-content {
      padding: 20px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    
    .activity-card-description {
      margin-bottom: 20px;
      font-size: 1rem;
      flex-grow: 1;
    }
    
    .activity-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: var(--text-color);
      opacity: 0.8;
      margin-bottom: 20px;
    }
    
    .activity-time, .activity-difficulty {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .activity-link {
      text-align: center;
      background-color: var(--accent-color);
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      text-decoration: none;
      transition: background-color 0.3s, transform 0.3s;
      font-weight: 600;
      margin-top: auto;
    }
    
    .activity-link:hover {
      background-color: #2980b9;
      transform: translateY(-3px);
      text-decoration: none;
      color: white;
    }
    
    /* No results message */
    .no-results {
      text-align: center;
      padding: 50px 20px;
      background-color: var(--card-bg);
      border-radius: 10px;
      margin: 30px 0;
      display: none;
    }
    
    .no-results-icon {
      font-size: 3.5rem;
      margin-bottom: 20px;
      opacity: 0.7;
    }
    
    /* Pagination */
    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 40px;
      margin-bottom: 20px;
      gap: 8px;
    }
    
    .page-link {
      padding: 10px 18px;
      border-radius: 4px;
      background-color: var(--card-bg);
      color: var(--text-color);
      text-decoration: none;
      transition: background-color 0.3s, transform 0.3s;
      box-shadow: 0 2px 4px var(--shadow-color);
    }
    
    .page-link:hover, .page-link.active {
      background-color: var(--accent-color);
      color: white;
      text-decoration: none;
      transform: translateY(-2px);
    }
    
    /* Section Backgrounds */
    .section-hero {
      background: linear-gradient(135deg, var(--header-bg) 0%, var(--accent-color) 100%);
      color: white;
    }
    
    .section-achievements {
      background-color: #f8f4fc;
    }
    
    [data-theme="dark"] .section-achievements {
      background-color: #1c1523;
    }
    
    .section-search {
      background-color: var(--bg-color);
    }
    
    .section-grammar-context {
      background-color: #f4fbf5;
    }
    
    [data-theme="dark"] .section-grammar-context {
      background-color: #172b17;
    }
    
    .section-activities {
      background-color: var(--bg-color);
    }
    
    .section-call-to-action {
      background: linear-gradient(135deg, var(--accent-color) 0%, var(--secondary-accent) 100%);
      color: white;
      text-align: center;
    }
    
    .cta-title {
      font-size: 2rem;
      margin-bottom: 20px;
      color: white;
    }
    
    .cta-subtitle {
      font-size: 1.1rem;
      margin-bottom: 30px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .btn-primary {
      background-color: white;
      color: var(--accent-color);
      padding: 12px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: bold;
      display: inline-block;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      font-size: 1rem;
    }
    
    .btn-primary:hover {
      background-color: rgba(255, 255, 255, 0.9);
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
      text-decoration: none;
    }
    
    /* Page Title */
    .page-title {
      text-align: center;
      color: white;
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    
    .page-subtitle {
      text-align: center;
      color: white;
      opacity: 0.9;
      font-size: 1.2rem;
      max-width: 800px;
      margin: 0 auto 30px;
    }
    
    /* Main Elements */
    .section-title {
      font-size: 2rem;
      margin-bottom: 30px;
      text-align: center;
    }
    
    /* Responsive adjustments */
    @media (max-width: 992px) {
      .dual-section {
        grid-template-columns: 1fr;
        gap: 30px;
      }
      
      .quick-challenge-section,
      .recommendation-section {
        width: 100%;
      }
    }
    
    @media (max-width: 768px) {
      .home-section {
        padding: 40px 5%;
      }
      
      .page-title {
        font-size: 2rem;
      }
      
      .activity-flex,
      .achievement-content,
      .context-flex {
        flex-direction: column;
        gap: 20px;
      }
      
      .achievement-image {
        max-width: 120px;
      }
      
      .search-row {
        margin-bottom: 15px;
      }
      
      .filter-container {
        flex-direction: column;
        gap: 10px;
      }
      
      .level-tab {
        padding: 12px 20px;
        font-size: 1rem;
      }
      
      .challenge-content {
        flex-direction: column;
        gap: 20px;
      }
      
      .challenge-timer {
        width: 100%;
      }
      
      .activity-cards {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Skip link for accessibility -->
  <a href="#main-content" class="skip-link">Skip to content</a>
  
  <!-- Theme toggle button -->
  <div class="theme-toggle-container">
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
      <span class="light-icon">‚òÄÔ∏è</span>
      <span class="dark-icon">üåô</span>
    </button>
  </div>
  
  <!-- Main navigation -->
  <nav class="main-navigation">
    <a href="home.html" class="site-logo">
      <img src="images/my-logo.svg" alt="English in Doses" width="150" height="auto">
    </a>
    <button class="nav-toggle" aria-label="Toggle navigation">‚ò∞</button>
    <div class="nav-links">
      <a href="home.html" class="nav-link">Home</a>
      <a href="about.html" class="nav-link">About Us</a>
      <a href="contact.html" class="nav-link">Contact Us</a>
      <a href="home.html#where-to-start" class="nav-link">Grammar</a>
      <a href="extra-practice.html" class="nav-link active" aria-current="page">Extra Practice</a>
      <a href="conversation-page.html" class="nav-link">Conversation</a>
      <a href="my-progress.html" class="nav-link">My Progress</a>
    </div>
  </nav>

  <div class="home-container">
    <main id="main-content">
      <!-- Hero Section -->
      <section class="home-section section-hero">
        <div class="home-section-content">
          <!-- Breadcrumbs -->
          <div class="breadcrumbs" aria-label="breadcrumb" style="margin-bottom: 30px; color: rgba(255, 255, 255, 0.8);">
            <span class="breadcrumb-item"><a href="home.html" style="color: rgba(255, 255, 255, 0.8);">Home</a></span>
            <span class="breadcrumb-separator">‚Ä∫</span>
            <span class="breadcrumb-item">Extra Practice</span>
          </div>
          
          <h1 class="page-title">Extra Practice Hub</h1>
          <p class="page-subtitle">Welcome to our Extra Practice Hub! Here you'll find additional activities to help you master English grammar. Choose from different types of exercises based on your level and specific grammar topics.</p>
          
          <!-- Last Activity Summary Section -->
          <div class="last-activity-section" id="last-activity-section">
            <div class="section-header">
              <h2 class="section-title" style="font-size: 1.4rem; text-align: left; margin-bottom: 0;">Your Last Activity</h2>
              <a href="my-progress.html" class="view-all-link">View all activity ‚Üí</a>
            </div>
            
            <div class="activity-flex">
              <div class="activity-info">
                <div class="activity-name">Present Perfect Progressive Quiz</div>
                <div class="activity-date">Completed today at 10:45 AM</div>
                
                <div class="activity-score">
                  <div class="score-display score-good">8/10 Correct</div>
                </div>
                
                <div class="action-buttons">
                  <a href="grammar/advanced/present-perfect-progressive.html" class="action-button secondary-action">Review Grammar</a>
                  <a href="practice/advanced/present-perfect-progressive-mcq.html" class="action-button secondary-action">Retry Activity</a>
                  <a href="practice/advanced/present-perfect-progressive-transformation.html" class="action-button primary-action">Try Different Exercise</a>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Challenge & Recommendation Row -->
          <div class="dual-section" style="margin-top: 30px;">
            <!-- Quick Challenge Section -->
            <section class="quick-challenge-section">
              <h2 class="challenge-title">2-Minute Challenge</h2>
              
              <div class="challenge-content">
                <div class="challenge-info">
                  <p class="challenge-desc">How many modal perfect forms can you identify correctly in 2 minutes? Test your speed and accuracy!</p>
                  
                  <div class="challenge-meta">
                    <span><i class="fa fa-bolt"></i> 10 questions</span>
                    <span><i class="fa fa-bar-chart"></i> Adaptive difficulty</span>
                  </div>
                  
                  <a href="practice/challenges/modal-perfect-speed.html" class="challenge-button">Start Challenge</a>
                </div>
                
                <div class="challenge-timer">
                  <div class="timer-value">2:00</div>
                  <div class="timer-label">minutes</div>
                </div>
              </div>
            </section>
            
            <!-- Recommendation Section -->
            <section class="recommendation-section">
              <h2 class="recommendation-title">Recommended For You</h2>
              
              <div class="recommendation-content">
                <div class="recommendation-activity">
                  <div class="activity-icon"><i class="fa fa-lightbulb-o"></i></div>
                  <h3 class="activity-title">Past Perfect Progressive Practice</h3>
                  <p class="activity-description">Based on your performance, we recommend strengthening your understanding of past perfect progressive tense.</p>
                  
                  <div class="progress-bar-container">
                    <div class="progress-bar-fill"></div>
                  </div>
                  <div class="progress-text">Currently at 35% mastery</div>
                  
                  <a href="practice/advanced/past-perfect-progressive-gap-fill.html" class="recommendation-button">Start Practice</a>
                </div>
              </div>
            </section>
          </div>
        </div>
      </section>
      
      <!-- Achievement Section -->
      <section class="home-section section-achievements">
        <div class="home-section-content">
          <h2 class="section-title">Your Achievements</h2>
          
          <div class="achievement-section-content" id="achievement-section">
            <div class="achievement-content">
              <div class="achievement-info">
                <div class="achievement-icon">üèÜ</div>
                <div class="achievement-name">Present Perfect Master</div>
                <p class="achievement-desc">You've completed 5 different Present Perfect activities with scores above 80%!</p>
                <div class="achievement-date">Unlocked yesterday</div>
                
                <a href="#" class="achievement-share" id="share-achievement">
                  <i class="fa fa-share-alt"></i> Share Achievement
                </a>
              </div>
              
              <img src="images/badge-perfect-master.svg" alt="Present Perfect Master Badge" class="achievement-image">
            </div>
          </div>
        </div>
      </section>
      
      <!-- Search Section -->
      <section class="home-section section-search">
        <div class="home-section-content">
          <h2 class="section-title">Find Practice Activities</h2>
          
          <!-- Search and Filter Section -->
          <div class="search-filter-section">
            <div class="search-container">
              <div class="search-row">
                <div class="search-input-container">
                  <i class="fa fa-search search-icon"></i>
                  <input type="text" class="search-input" placeholder="Search for a grammar topic or activity..." id="activity-search">
                </div>
              </div>
              
              <div class="filter-container">
                <select class="filter-select" id="activity-type-filter">
                  <option value="">All Activity Types</option>
                  <option value="mcq">Multiple Choice</option>
                  <option value="gap-fill">Gap Fill</option>
                  <option value="transformation">Sentence Transformation</option>
                  <option value="matching">Matching Exercise</option>
                  <option value="drag-drop">Drag and Drop</option>
                </select>
                
                <select class="filter-select" id="difficulty-filter">
                  <option value="">All Difficulties</option>
                  <option value="easy">Easy</option>
                  <option value="medium">Medium</option>
                  <option value="hard">Hard</option>
                </select>
                
                <select class="filter-select" id="time-filter">
                  <option value="">Any Length</option>
                  <option value="short">Quick (< 5 min)</option>
                  <option value="medium">Medium (5-10 min)</option>
                  <option value="long">Extended (> 10 min)</option>
                </select>
                
                <select class="filter-select" id="topic-filter">
                  <option value="">All Topics</option>
                  <option value="tenses">Tenses</option>
                  <option value="conditionals">Conditionals</option>
                  <option value="modals">Modal Verbs</option>
                  <option value="passive">Passive Voice</option>
                  <option value="articles">Articles</option>
                  <option value="prepositions">Prepositions</option>
                </select>
              </div>
            </div>
          </div>
          
          <!-- Level Tabs -->
          <div class="level-tabs">
            <div class="level-tab beginner active" data-level="beginner">Beginner</div>
            <div class="level-tab intermediate" data-level="intermediate">Intermediate</div>
            <div class="level-tab advanced" data-level="advanced">Advanced</div>
            <div class="level-tab" data-level="mixed">Mixed Levels</div>
          </div>
        </div>
      </section>
      
      <!-- Grammar in Context Section -->
      <section class="home-section section-grammar-context">
        <div class="home-section-content">
          <h2 class="section-title">Grammar in Real Life</h2>
          
          <div class="grammar-context-content">
            <h3 class="context-title">Present Perfect Progressive</h3>
            
            <div class="context-flex">
              <div class="context-content">
                <div class="context-quote">
                  Scientists <span class="highlighted-grammar">have been studying</span> the effects of climate change on coral reefs for decades, and their research <span class="highlighted-grammar">has been showing</span> increasingly concerning results.
                </div>
                
                <div class="context-source">
                  - From a National Geographic article (2023)
                </div>
                
                <div class="context-explanation">
                  <p>The phrases "have been studying" and "has been showing" use the <strong>Present Perfect Progressive</strong> tense. This tense emphasizes both:</p>
                  <ul>
                    <li>The ongoing nature of the research (it continues into the present)</li>
                    <li>The duration of the activity (for decades)</li>
                  </ul>
                  <p>This gives readers a sense of continuous, long-term scientific work rather than a one-time or completed study.</p>
                </div>
                
                <div class="context-actions">
                  <button class="refresh-button"><i class="fa fa-refresh"></i> Show Another Example</button>
                  <a href="grammar/advanced/present-perfect-progressive.html" class="practice-button">Practice This Grammar</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- Activities Section -->
      <section class="home-section section-activities">
        <div class="home-section-content">
          <!-- No Results Message (initially hidden) -->
          <div class="no-results" id="no-results">
            <div class="no-results-icon"><i class="fa fa-search"></i></div>
            <h2>No matching activities found</h2>
            <p>Try adjusting your search or filters to find activities.</p>
          </div>
          
          <!-- Beginner Level Activities -->
          <div class="practice-level-container active" id="beginner-activities">
            <!-- Present Simple Category -->
            <div class="practice-category">
              <h2 class="category-title">Present Simple</h2>
              <div class="activity-cards">
                <!-- Activity 1 -->
                <div class="activity-card">
                  <div class="activity-header">
                    <h3 class="activity-card-title">Daily Routines</h3>
                    <span class="activity-badge mcq">MCQ</span>
                  </div>
                  <div class="activity-card-content">
                    <p class="activity-card-description">Practice using Present Simple to talk about habits and daily routines. Choose the correct verb forms in various contexts.</p>
                    <div class="activity-meta">
                      <span class="activity-time"><i class="fa fa-clock-o"></i> 5 min</span>
                      <span class="activity-difficulty"><i class="fa fa-bar-chart"></i> Easy</span>
                    </div>
                    <a href="practice/beginner/present-simple-mcq.html" class="activity-link">Start Activity</a>
                  </div>
                </div>
                
                <!-- Activity 2 -->
                <div class="activity-card">
                  <div class="activity-header">
                    <h3 class="activity-card-title">Present Simple Questions</h3>
                    <span class="activity-badge gap-fill">Gap Fill</span>
                  </div>
                  <div class="activity-card-content">
                    <p class="activity-card-description">Complete sentences by filling in the correct form of the verbs to create questions in the Present Simple tense.</p>
                    <div class="activity-meta">
                      <span class="activity-time"><i class="fa fa-clock-o"></i> 7 min</span>
                      <span class="activity-difficulty"><i class="fa fa-bar-chart"></i> Medium</span>
                    </div>
                    <a href="practice/beginner/present-simple-gap-fill.html" class="activity-link">Start Activity</a>
                  </div>
                </div>
                
                <!-- Activity 3 -->
                <div class="activity-card">
                  <div class="activity-header">
                    <h3 class="activity-card-title">Frequency Adverbs</h3>
                    <span class="activity-badge drag-drop">Drag & Drop</span>
                  </div>
                  <div class="activity-card-content">
                    <p class="activity-card-description">Practice placing frequency adverbs in the correct position in Present Simple sentences by dragging and dropping them.</p>
                    <div class="activity-meta">
                      <span class="activity-time"><i class="fa fa-clock-o"></i> 6 min</span>
                      <span class="activity-difficulty"><i class="fa fa-bar-chart"></i> Easy</span>
                    </div>
                    <a href="practice/beginner/frequency-adverbs-drag.html" class="activity-link">Start Activity</a>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Past Simple Category -->
            <div class="practice-category">
              <h2 class="category-title">Past Simple</h2>
              <div class="activity-cards">
                <!-- Activity 1 -->
                <div class="activity-card">
                  <div class="activity-header">
                    <h3 class="activity-card-title">Regular vs Irregular Verbs</h3>
                    <span class="activity-badge matching">Matching</span>
                  </div>
                  <div class="activity-card-content">
                    <p class="activity-card-description">Match base forms of verbs with their correct Past Simple forms, focusing on both regular and irregular verb patterns.</p>
                    <div class="activity-meta">
                      <span class="activity-time"><i class="fa fa-clock-o"></i> 8 min</span>
                      <span class="activity-difficulty"><i class="fa fa-bar-chart"></i> Medium</span>
                    </div>
                    <a href="practice/beginner/past-simple-matching.html" class="activity-link">Start Activity</a>
                  </div>
                </div>
                
                <!-- Activity 2 -->
                <div class="activity-card">
                  <div class="activity-header">
                    <h3 class="activity-card-title">Past Simple Story</h3>
                    <span class="activity-badge gap-fill">Gap Fill</span>
                  </div>
                  <div class="activity-card-content">
                    <p class="activity-card-description">Complete a short story by filling in the blanks with the Past Simple form of the verbs provided in brackets.</p>
                    <div class="activity-meta">
                      <span class="activity-time"><i class="fa fa-clock-o"></i> 10 min</span>
                      <span class="activity-difficulty"><i class="fa fa-bar-chart"></i> Medium</span>
                    </div>
                    <a href="practice/beginner/past-simple-story.html" class="activity-link">Start Activity</a>
                  </div>
                </div>
                
                <!-- Activity 3 -->
                <div class="activity-card">
                  <div class="activity-header">
                    <h3 class="activity-card-title">Past Simple Questions</h3>
                    <span class="activity-badge transformation">Transformation</span>
                  </div>
                  <div class="activity-card-content">
                    <p class="activity-card-description">Transform affirmative statements into questions and negative sentences using the Past Simple tense.</p>
                    <div class="activity-meta">
                      <span class="activity-time"><i class="fa fa-clock-o"></i> 7 min</span>
                      <span class="activity-difficulty"><i class="fa fa-bar-chart"></i> Hard</span>
                    </div>
                    <a href="practice/beginner/past-simple-transformation.html" class="activity-link">Start Activity</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Intermediate Level Activities (initially hidden) -->
          <div class="practice-level-container" id="intermediate-activities">
            <!-- Present Perfect Category -->
            <div class="practice-category">
              <h2 class="category-title">Present Perfect</h2>
              <div class="activity-cards">
                <!-- Activity 1 -->
                <div class="activity-card">
                  <div class="activity-header">
                    <h3 class="activity-card-title">Present Perfect vs Past Simple</h3>
                    <span class="activity-badge mcq">MCQ</span>
                  </div>
                  <div class="activity-card-content">
                    <p class="activity-card-description">Choose between Present Perfect and Past Simple in various sentences, focusing on the differences in meaning and usage.</p>
                    <div class="activity-meta">
                      <span class="activity-time"><i class="fa fa-clock-o"></i> 8 min</span>
                      <span class="activity-difficulty"><i class="fa fa-bar-chart"></i> Medium</span>
                    </div>
                    <a href="practice/intermediate/present-perfect-vs-past-simple.html" class="activity-link">Start Activity</a>
                  </div>
                </div>
                
                <!-- Additional activities would go here -->
              </div>
            </div>
          </div>
          
          <!-- Advanced Level Activities (initially hidden) -->
          <div class="practice-level-container" id="advanced-activities">
            <!-- Perfect Tenses Category -->
            <div class="practice-category">
              <h2 class="category-title">Perfect Tenses</h2>
              <div class="activity-cards">
                <!-- Activity 1 -->
                <div class="activity-card">
                  <div class="activity-header">
                    <h3 class="activity-card-title">Present Perfect Progressive</h3>
                    <span class="activity-badge mcq">MCQ</span>
                  </div>
                  <div class="activity-card-content">
                    <p class="activity-card-description">Choose between Present Perfect Simple and Present Perfect Progressive, understanding the subtle differences in meaning.</p>
                    <div class="activity-meta">
                      <span class="activity-time"><i class="fa fa-clock-o"></i> 8 min</span>
                      <span class="activity-difficulty"><i class="fa fa-bar-chart"></i> Hard</span>
                    </div>
                    <a href="practice/advanced/present-perfect-progressive-mcq.html" class="activity-link">Start Activity</a>
                  </div>
                </div>
                
                <!-- Additional activities would go here -->
              </div>
            </div>
          </div>
          
          <!-- Mixed Levels Activities (initially hidden) -->
          <div class="practice-level-container" id="mixed-activities">
            <!-- Prepositions Category -->
            <div class="practice-category">
              <h2 class="category-title">Prepositions</h2>
              <div class="activity-cards">
                <!-- Activity 1 -->
                <div class="activity-card">
                  <div class="activity-header">
                    <h3 class="activity-card-title">Prepositions of Time</h3>
                    <span class="activity-badge mcq">MCQ</span>
                  </div>
                  <div class="activity-card-content">
                    <p class="activity-card-description">Practice using prepositions of time (in, on, at) correctly in various contexts.</p>
                    <div class="activity-meta">
                      <span class="activity-time"><i class="fa fa-clock-o"></i> 5 min</span>
                      <span class="activity-difficulty"><i class="fa fa-bar-chart"></i> Easy</span>
                    </div>
                    <a href="practice/mixed/prepositions-time-mcq.html" class="activity-link">Start Activity</a>
                  </div>
                </div>
                
                <!-- Additional activities would go here -->
              </div>
            </div>
          </div>
          
          <!-- Pagination -->
          <div class="pagination">
            <a href="#" class="page-link active">1</a>
            <a href="#" class="page-link">2</a>
            <a href="#" class="page-link">3</a>
            <a href="#" class="page-link">Next ¬ª</a>
          </div>
        </div>
      </section>
      
      <!-- Call to Action Section -->
      <section class="home-section section-call-to-action">
        <div class="home-section-content">
          <h2 class="cta-title">Ready to Improve Your English Grammar?</h2>
          <p class="cta-subtitle">Regular practice is the key to mastering English grammar. Just 15-30 minutes a day can make a significant difference in your English skills.</p>
          <a href="conversation-page.html" class="btn-primary">Book a Conversation Lesson</a>
        </div>
      </section>
    </main>
  </div>
  
  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="home.html">Home</a></li>
          <li><a href="home.html#where-to-start">Grammar</a></li>
          <li><a href="extra-practice.html">Extra Practice</a></li>
          <li><a href="my-progress.html">My Progress</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Grammar Topics</h3>
        <ul>
          <li><a href="grammar/advanced/advanced-grammar.html#advanced-tenses-and-aspect">Advanced Tenses</a></li>
          <li><a href="grammar/advanced/advanced-grammar.html#conditionals">Advanced Conditionals</a></li>
          <li><a href="grammar/advanced/advanced-grammar.html#modals">Advanced Modal Verbs</a></li>
          <li><a href="grammar/advanced/advanced-grammar.html#passive">Advanced Passive Voice</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <ul>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>¬© 2025 English in Doses | All rights reserved | <a href="license.html">Licensing Information</a></p>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="js/core.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Level tab functionality
      const levelTabs = document.querySelectorAll('.level-tab');
      const levelContainers = document.querySelectorAll('.practice-level-container');
      
      levelTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          // Update active tab
          levelTabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          
          // Show corresponding content
          const level = this.getAttribute('data-level');
          levelContainers.forEach(container => {
            container.classList.remove('active');
          });
          document.getElementById(level + '-activities').classList.add('active');
          
          // Update URL hash
          history.pushState(null, null, '#' + level);
        });
      });
      
      // Check URL hash on page load
      if (location.hash) {
        const level = location.hash.substring(1);
        const tab = document.querySelector(`.level-tab[data-level="${level}"]`);
        if (tab) {
          tab.click();
        }
      }
      
      // Search functionality
      const searchInput = document.getElementById('activity-search');
      const filterType = document.getElementById('activity-type-filter');
      const filterDifficulty = document.getElementById('difficulty-filter');
      const filterTime = document.getElementById('time-filter');
      const filterTopic = document.getElementById('topic-filter');
      const noResults = document.getElementById('no-results');
      
      // Combined filter function
      function filterActivities() {
        const searchTerm = searchInput.value.toLowerCase();
        const typeFilter = filterType.value;
        const difficultyFilter = filterDifficulty.value;
        const timeFilter = filterTime.value;
        const topicFilter = filterTopic.value;
        
        let hasResults = false;
        
        // Get all activity cards that are in the currently visible level
        const activeLevel = document.querySelector('.practice-level-container.active');
        const activityCards = activeLevel.querySelectorAll('.activity-card');
        
        activityCards.forEach(card => {
          const title = card.querySelector('.activity-card-title').textContent.toLowerCase();
          const description = card.querySelector('.activity-card-description').textContent.toLowerCase();
          const type = card.querySelector('.activity-badge').classList[1];
          const difficulty = card.querySelector('.activity-difficulty').textContent.toLowerCase();
          const time = card.querySelector('.activity-time').textContent.toLowerCase();
          
          // Get parent category for topic filter
          const category = card.closest('.practice-category').querySelector('.category-title').textContent.toLowerCase();
          
          // Check all filter conditions
          const matchesSearch = searchTerm === '' || 
            title.includes(searchTerm) || 
            description.includes(searchTerm);
          
          const matchesType = typeFilter === '' || type.includes(typeFilter);
          
          const matchesDifficulty = difficultyFilter === '' || 
            (difficultyFilter === 'easy' && difficulty.includes('easy')) ||
            (difficultyFilter === 'medium' && difficulty.includes('medium')) ||
            (difficultyFilter === 'hard' && difficulty.includes('hard'));
          
          const matchesTime = timeFilter === '' || 
            (timeFilter === 'short' && parseInt(time.match(/\d+/)[0]) < 5) ||
            (timeFilter === 'medium' && parseInt(time.match(/\d+/)[0]) >= 5 && parseInt(time.match(/\d+/)[0]) <= 10) ||
            (timeFilter === 'long' && parseInt(time.match(/\d+/)[0]) > 10);
          
          const matchesTopic = topicFilter === '' || category.includes(topicFilter);
          
          // Show or hide the card based on filters
          if (matchesSearch && matchesType && matchesDifficulty && matchesTime && matchesTopic) {
            card.style.display = 'flex';
            hasResults = true;
          } else {
            card.style.display = 'none';
          }
        });
        
        // For each category, hide it if all its cards are hidden
        const categories = activeLevel.querySelectorAll('.practice-category');
        categories.forEach(category => {
          const visibleCards = category.querySelectorAll('.activity-card[style="display: flex;"]');
          category.style.display = visibleCards.length > 0 ? 'block' : 'none';
        });
        
        // Show or hide the "no results" message
        noResults.style.display = hasResults ? 'none' : 'block';
      }
      
      // Attach event listeners to all filter controls
      [searchInput, filterType, filterDifficulty, filterTime, filterTopic].forEach(filter => {
        filter.addEventListener('input', filterActivities);
        filter.addEventListener('change', filterActivities);
      });
      
      // Share achievement functionality
      const shareButton = document.getElementById('share-achievement');
      if (shareButton) {
        shareButton.addEventListener('click', function(e) {
          e.preventDefault();
          
          // Check if Web Share API is available
          if (navigator.share) {
            navigator.share({
              title: 'I earned the Present Perfect Master badge!',
              text: 'I just earned the Present Perfect Master badge on English in Doses after completing 5 different Present Perfect activities with scores above 80%!',
              url: window.location.href
            })
            .catch(err => {
              console.log('Error sharing:', err);
              // Fallback - open in new window
              window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent('I just earned the Present Perfect Master badge on English in Doses!'), '_blank');
            });
          } else {
            // Fallback for browsers that don't support Web Share API
            window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent('I just earned the Present Perfect Master badge on English in Doses!'), '_blank');
          }
        });
      }
      
      // Check for user's progress data
      function initializeUserData() {
        if (typeof localStorage !== 'undefined') {
          try {
            const progressData = JSON.parse(localStorage.getItem('esl-progress-data'));
            const lastActivitySection = document.getElementById('last-activity-section');
            const achievementSection = document.getElementById('achievement-section');
            
            // If no progress data or no completed activities, hide the last activity section
            if (!progressData || !progressData.activities || Object.keys(progressData.activities).filter(key => progressData.activities[key].completed).length === 0) {
              if (lastActivitySection) lastActivitySection.style.display = 'none';
              if (achievementSection) achievementSection.style.display = 'none';
              return;
            }
            
            // Otherwise, show real data if available
            // This part would be expanded in a real implementation to show actual user data
            // For now, we're showing the mock data already in the HTML
          } catch (error) {
            console.error('Error loading progress data:', error);
            // Hide personal sections if there's an error
            const lastActivitySection = document.getElementById('last-activity-section');
            const achievementSection = document.getElementById('achievement-section');
            if (lastActivitySection) lastActivitySection.style.display = 'none';
            if (achievementSection) achievementSection.style.display = 'none';
          }
        }
      }
      
      // Initialize user data on page load
      initializeUserData();
    });
  </script>
</body>
</html>
