<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Travel English Lesson 3 - Learn essential vocabulary and phrases for immigration and customs at the airport. Beginner ESL lesson.">
  <title>Immigration and Customs - Travel English | English in Doses</title>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&family=Source+Code+Pro&display=swap" rel="stylesheet">
  
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  
  <!-- Styles -->
  
<link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/levels.css">
  <link rel="stylesheet" href="../../css/activities.css">
  <link rel="stylesheet" href="../../css/vocab-match.css">
  <link rel="stylesheet" href="../../css/flash-cards.css">
  <link rel="stylesheet" href="../../css/compact-matching.css">
  <link rel="stylesheet" href="../../css/drop-down.css">
</head>

<body class="beginner-section">
  <!-- Skip link for accessibility -->
  <a href="#main-content" class="skip-link">Skip to content</a>

  <!-- Theme toggle button -->
  <div class="theme-toggle-container">
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
      <span class="light-icon">‚òÄÔ∏è</span>
      <span class="dark-icon">üåô</span>
    </button>
  </div>

  <!-- Navigation -->
  <nav class="main-navigation">
    <a href="../../home.html" class="site-logo">
      <img src="../../images/my-logo.svg" alt="English in Doses" width="150" height="auto">
    </a>
    <button class="nav-toggle" aria-label="Toggle navigation">‚ò∞</button>
    <div class="nav-links">
      <a href="../../home.html" class="nav-link">Home</a>
      <a href="../../about.html" class="nav-link">About Us</a>
      <a href="../../home.html#level-test" class="nav-link">Find Your Level</a>
      <a href="../../beginner-landing.html" class="nav-link">Beginner</a>
      <a href="../../intermediate-landing.html" class="nav-link">Intermediate</a>
      <a href="../../advanced-landing.html" class="nav-link">Advanced</a>
      <a href="../../travel/beginner-travel/travel-english.html" class="nav-link">Travel English</a>
      <a href="../../my-progress.html" class="nav-link">My Progress</a>
      <a href="../../booking-page.html" class="nav-link">Book a Lesson</a>
    </div>
    <div class="beginner-nav-indicator"></div>
  </nav>

  <div class="container">
    <!-- Breadcrumbs -->
    <nav class="breadcrumbs" aria-label="Breadcrumb">
      <span class="breadcrumb-item"><a href="../../home.html">Home</a></span>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-item"><a href="travel-english.html">Travel English</a></span>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-item"><a href="travel-english.html#unit-1">Unit 1: Airport</a></span>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-item">Lesson 3: Immigration and Customs</span>
    </nav>

    <main id="main-content">
      <h1>Lesson 3: Immigration and Customs</h1>
      <p class="subtitle">Answering Questions at Passport Control</p>

      <!-- ======================================== -->
      <!-- LESSON GOAL -->
      <!-- ======================================== -->
      <section class="intro-section">
        <h2><i class="fa-solid fa-bullseye icon-warning"></i> Lesson Goal</h2>
        <p><strong>Answer immigration questions confidently, go through customs, and explain the purpose of your visit.</strong></p>
        
        <h3>What you will learn:</h3>
        <ul>
          <li>Vocabulary for immigration and customs.</li>
          <li>How to answer questions about your visit using "I'm here for..." and "I'm staying...".</li>
          <li>How to talk about your job and travel plans.</li>
        </ul>
      </section>

      <!-- ======================================== -->
      <!-- SECTION 1: VOCABULARY WITH CAROUSEL -->
      <!-- ======================================== -->
      <section class="content-section">
        <h2><i class="fa-solid fa-book icon-primary"></i> Vocabulary</h2>
        <p>Learn these words for immigration and customs at the airport. Drag each word to the correct picture.</p>
        
        <div id="vocab-match" class="vocab-match-container">
          
          <div class="vocab-section">
            <!-- Carousel Navigation -->
            <div class="vocab-carousel-nav">
              <button class="vocab-carousel-btn vocab-carousel-prev" aria-label="Previous page">‚Äπ</button>
              <span class="vocab-carousel-indicator">1 / 2</span>
              <button class="vocab-carousel-btn vocab-carousel-next" aria-label="Next page">‚Ä∫</button>
            </div>
            
            <!-- Carousel Container -->
            <div class="vocab-carousel">
              
              <!-- Page 1: Immigration -->
              <div class="vocab-carousel-page active">
                <div class="vocab-images-grid" style="overflow: visible; max-height: none;">
                  <div class="vocab-image-item">
                    <div class="vocab-image-wrapper">
                      <!-- IMAGE: visa - a visa sticker in a passport -->
                      <img src="../../images/travel-beginner/unit1/lesson3/visa.png" alt="visa sticker in a passport" class="vocab-image">
                    </div>
                    <div class="vocab-drop-zone empty" data-answer="visa"></div>
                  </div>
                  
                  <div class="vocab-image-item">
                    <div class="vocab-image-wrapper">
                      <!-- IMAGE: stamp - a passport stamp being pressed -->
                      <img src="../../images/travel-beginner/unit1/lesson3/stamp.png" alt="passport stamp" class="vocab-image">
                    </div>
                    <div class="vocab-drop-zone empty" data-answer="stamp"></div>
                  </div>
                  
                  <div class="vocab-image-item">
                    <div class="vocab-image-wrapper">
                      <!-- IMAGE: officer - an immigration officer at a desk -->
                      <img src="../../images/travel-beginner/unit1/lesson3/officer.png" alt="immigration officer at desk" class="vocab-image">
                    </div>
                    <div class="vocab-drop-zone empty" data-answer="officer"></div>
                  </div>
                  
                  <div class="vocab-image-item">
                    <div class="vocab-image-wrapper">
                      <!-- IMAGE: passport control - the passport control sign/area -->
                      <img src="../../images/travel-beginner/unit1/lesson3/passport-control.png" alt="passport control area with sign" class="vocab-image">
                    </div>
                    <div class="vocab-drop-zone empty" data-answer="passport control"></div>
                  </div>
                </div>
              </div>
              
              <!-- Page 2: Customs -->
              <div class="vocab-carousel-page">
                <div class="vocab-images-grid" style="overflow: visible; max-height: none;">
                  <div class="vocab-image-item">
                    <div class="vocab-image-wrapper">
                      <!-- IMAGE: customs - customs area with sign -->
                      <img src="../../images/travel-beginner/unit1/lesson3/customs.png" alt="customs area with sign" class="vocab-image">
                    </div>
                    <div class="vocab-drop-zone empty" data-answer="customs"></div>
                  </div>
                  
                  <div class="vocab-image-item">
                    <div class="vocab-image-wrapper">
                      <!-- IMAGE: declaration - a customs declaration form -->
                      <img src="../../images/travel-beginner/unit1/lesson3/declaration.png" alt="customs declaration form" class="vocab-image">
                    </div>
                    <div class="vocab-drop-zone empty" data-answer="declaration"></div>
                  </div>
                  
                  <div class="vocab-image-item">
                    <div class="vocab-image-wrapper">
                      <!-- IMAGE: nothing to declare - green corridor with sign -->
                      <img src="../../images/travel-beginner/unit1/lesson3/nothing-to-declare.png" alt="green corridor nothing to declare sign" class="vocab-image">
                    </div>
                    <div class="vocab-drop-zone empty" data-answer="nothing to declare"></div>
                  </div>
                  
                  <div class="vocab-image-item">
                    <div class="vocab-image-wrapper">
                      <!-- IMAGE: goods to declare - red corridor with sign -->
                      <img src="../../images/travel-beginner/unit1/lesson3/goods-to-declare.png" alt="red corridor goods to declare sign" class="vocab-image">
                    </div>
                    <div class="vocab-drop-zone empty" data-answer="goods to declare"></div>
                  </div>
                </div>
              </div>
              
            </div>
            
            <!-- Page Dots -->
            <div class="vocab-carousel-dots">
              <span class="vocab-carousel-dot active" data-page="0"></span>
              <span class="vocab-carousel-dot" data-page="1"></span>
            </div>
            
            <!-- Sticky Word Bank (jumbled order) -->
            <div class="vocab-words-wrapper">
              <p class="vocab-words-label"><i class="fa-solid fa-hand-point-down icon-primary"></i> Drag words from here</p>
              <div class="vocab-words-container">
                <div class="vocab-word-item" data-page="0">stamp</div>
                <div class="vocab-word-item" data-page="0">passport control</div>
                <div class="vocab-word-item" data-page="0">officer</div>
                <div class="vocab-word-item" data-page="0">visa</div>
                <div class="vocab-word-item" data-page="1">nothing to declare</div>
                <div class="vocab-word-item" data-page="1">customs</div>
                <div class="vocab-word-item" data-page="1">goods to declare</div>
                <div class="vocab-word-item" data-page="1">declaration</div>
              </div>
            </div>
          </div>
          
          <!-- Controls -->
          <div class="vocab-controls">
            <button class="vocab-check-btn">Check Answers</button>
            <button class="vocab-reset-btn">Try Again</button>
          </div>
          
          <div class="vocab-score">Your score: <span>0</span>/8</div>
          <div class="vocab-feedback"></div>
          
        </div>
      </section>

      <!-- ======================================== -->
      <!-- SECTION 2: KEY PHRASES WITH FLASHCARDS -->
      <!-- ======================================== -->
      <section class="content-section">
        <h2><i class="fa-solid fa-comments icon-primary"></i> Key Phrases</h2>
        <p>At immigration, the officer will ask you questions. Learn these phrases to answer confidently. Click each card to see example answers.</p>
        
        <div id="flashcards" class="flashcard-container">
          
          <div class="flashcard-intro">
            <p class="hint"><i class="fa-solid fa-hand-point-up icon-primary"></i> Click a card to see example answers.</p>
          </div>
          
          <div class="flashcard-grid">
            
            <!-- Card 1: Purpose of visit -->
            <div class="flashcard-wrapper">
              <div class="flashcard" tabindex="0">
                <div class="flashcard-front">
                  <span class="flashcard-number">1</span>
                  <span class="flashcard-label">Officer's Question</span>
                  <span class="flashcard-phrase" style="font-size: 1.6rem; margin-bottom: none;">What's the purpose of your visit?</span>
                  <span class="flashcard-usage" style="color: white; margin-top: none;">Why are you here?</span>
                  <span class="flashcard-hint"><i class="fa-solid fa-rotate rotate-icon icon-primary"></i> Click to see answers</span>
                </div>
                <div class="flashcard-back">
                  <span class="flashcard-number">1</span>
                  <span class="flashcard-label">Example Answers</span>
                  <span class="flashcard-example"><strong>I'm here for</strong> business.</span>
                  <span class="flashcard-example"><strong>I'm here for</strong> tourism.</span>
                  <span class="flashcard-example">I'm <strong>visiting</strong> friends.</span>
                </div>
              </div>
            </div>
            
            <!-- Card 2: Duration -->
            <div class="flashcard-wrapper">
              <div class="flashcard" tabindex="0">
                <div class="flashcard-front">
                  <span class="flashcard-number">2</span>
                  <span class="flashcard-label">Officer's Question</span>
                  <span class="flashcard-phrase" style="font-size: 1.6rem; margin-bottom: none;">How long are you staying?</span>
                  <span class="flashcard-usage" style="color: white; margin-top: none;">How many days or weeks?</span>
                  <span class="flashcard-hint"><i class="fa-solid fa-rotate rotate-icon icon-primary"></i> Click to see answers</span>
                </div>
                <div class="flashcard-back">
                  <span class="flashcard-number">2</span>
                  <span class="flashcard-label">Example Answers</span>
                  <span class="flashcard-example"><strong>I'm staying for</strong> one week.</span>
                  <span class="flashcard-example"><strong>I'm staying for</strong> five days.</span>
                  <span class="flashcard-example"><strong>I'm staying for</strong> two months.</span>
                </div>
              </div>
            </div>
            
            <!-- Card 3: Where staying -->
            <div class="flashcard-wrapper">
              <div class="flashcard" tabindex="0">
                <div class="flashcard-front">
                  <span class="flashcard-number">3</span>
                  <span class="flashcard-label">Officer's Question</span>
                  <span class="flashcard-phrase" style="font-size: 1.6rem; margin-bottom: none;">Where will you stay?</span>
                  <span class="flashcard-usage" style="color: white; margin-top: none;">What place will you sleep?</span>
                  <span class="flashcard-hint"><i class="fa-solid fa-rotate rotate-icon icon-primary"></i> Click to see answers</span>
                </div>
                <div class="flashcard-back">
                  <span class="flashcard-number">3</span>
                  <span class="flashcard-label">Example Answers</span>
                  <span class="flashcard-example"><strong>I'm staying at</strong> the Grand Hotel.</span>
                  <span class="flashcard-example"><strong>I'm staying at</strong> my sister's house.</span>
                  <span class="flashcard-example"><strong>I'm staying with</strong> a friend.</span>
                </div>
              </div>
            </div>
            
            <!-- Card 4: Job -->
            <div class="flashcard-wrapper">
              <div class="flashcard" tabindex="0">
                <div class="flashcard-front">
                  <span class="flashcard-number">4</span>
                  <span class="flashcard-label">Officer's Question</span>
                  <span class="flashcard-phrase" style="font-size: 1.6rem; margin-bottom: none;">What is your job?</span>
                  <span class="flashcard-usage" style="color: white; margin-top: none;">What work do you do?</span>
                  <span class="flashcard-hint"><i class="fa-solid fa-rotate rotate-icon icon-primary"></i> Click to see answers</span>
                </div>
                <div class="flashcard-back">
                  <span class="flashcard-number">4</span>
                  <span class="flashcard-label">Example Answers</span>
                  <span class="flashcard-example"><strong>I'm a</strong> teacher.</span>
                  <span class="flashcard-example"><strong>I'm an</strong> engineer.</span>
                  <span class="flashcard-example"><strong>I'm a</strong> nurse.</span>
                </div>
              </div>
            </div>
            
          </div>
          
          <div class="flashcard-controls">
            <button class="flip-all-btn"><i class="fa-solid fa-rotate icon-primary"></i> Show All Answers</button>
          </div>
          
        </div>

        <div class="note">
          <p><strong><i class="fa-solid fa-lightbulb icon-secondary"></i> Tip:</strong> At immigration, give short and clear answers. You do not need to say long sentences. For example: "Tourism." or "Two weeks." is also fine.</p>
        </div>
      </section>

      <!-- ======================================== -->
      <!-- SECTION 2B: GRAMMAR - PRESENT CONTINUOUS FOR ARRANGEMENTS -->
      <!-- ======================================== -->
      <section class="content-section">
        <h2><i class="fa-solid fa-book-open icon-primary"></i> Grammar: Talking About Arrangements</h2>
        <p>We use the <strong>present continuous</strong> (am/is/are + verb-ing) to talk about plans and arrangements ‚Äî things you have already decided to do.</p>
        
        <p><strong>Form:</strong> subject + <span class="grammar-highlight">am/is/are</span> + <span class="grammar-highlight">verb-ing</span></p>
        
        <div class="example">
          <ol>
            <li><span class="grammar-highlight">I'm staying</span> at the Grand Hotel. (travel plan)</li>
            <li><span class="grammar-highlight">She's meeting</span> her friend on Saturday. (social plan)</li>
            <li><span class="grammar-highlight">We're starting</span> a new course next week. (work/study plan)</li>
          </ol>
        </div>
        
        <div class="note">
          <p><strong><i class="fa-solid fa-lightbulb icon-secondary"></i> Tip:</strong> At immigration, you use this grammar when you answer questions like "Where will you stay?" and "How long are you staying?".</p>
        </div>
      </section>

      <!-- ======================================== -->
      <!-- SECTION 3: PRACTICE ACTIVITIES -->
      <!-- ======================================== -->
      <section class="content-section">
        <h2><i class="fa-solid fa-pencil icon-primary"></i> Practice Activities</h2>
        <p>Practise what you have learned with these activities.</p>

        <!-- Activity Navigation -->
        <div id="activity-nav" class="activity-nav">
          <button data-activity="matching" class="activity-nav-btn active">Match Q&A</button>
          <button data-activity="dropdown-immigration" class="activity-nav-btn">Complete Conversations</button>
          <button data-activity="mcq" class="activity-nav-btn">Choose the Answer</button>
        </div>

        <!-- ======================================== -->
        <!-- ACTIVITY 1: COMPACT MATCHING - Q&A -->
        <!-- ======================================== -->
        <section id="matching" class="activity-container active">
          <h3><i class="fa-solid fa-arrows-left-right icon-primary"></i> Match Questions and Answers</h3>
          <p>Match the officer's question (left) with the correct answer (right). Drag the letter markers to the answer slots, or tap to select and place.</p>
          
          <div id="matching-activity" class="compact-matching">
            <!-- Column 1: Officer Questions -->
            <div class="cm-statements">
              <div class="cm-statement">
                <span class="cm-statement-num">1</span>
                <p>What's the purpose of your visit?</p>
              </div>
              <div class="cm-statement">
                <span class="cm-statement-num">2</span>
                <p>How long are you staying?</p>
              </div>
              <div class="cm-statement">
                <span class="cm-statement-num">3</span>
                <p>Where will you stay?</p>
              </div>
              <div class="cm-statement">
                <span class="cm-statement-num">4</span>
                <p>What is your job?</p>
              </div>
              <div class="cm-statement">
                <span class="cm-statement-num">5</span>
                <p>Do you have your return ticket?</p>
              </div>
              <div class="cm-statement">
                <span class="cm-statement-num">6</span>
                <p>Do you have anything to declare?</p>
              </div>
              <div class="cm-statement">
                <span class="cm-statement-num">7</span>
                <p>Is this your first visit?</p>
              </div>
            </div>
            
            <!-- Column 2: Markers Bank -->
            <div class="cm-markers">
              <div class="cm-marker-slot" data-marker="1">
                <div class="cm-marker" data-match="1" draggable="true">A</div>
              </div>
              <div class="cm-marker-slot" data-marker="2">
                <div class="cm-marker" data-match="2" draggable="true">B</div>
              </div>
              <div class="cm-marker-slot" data-marker="3">
                <div class="cm-marker" data-match="3" draggable="true">C</div>
              </div>
              <div class="cm-marker-slot" data-marker="4">
                <div class="cm-marker" data-match="4" draggable="true">D</div>
              </div>
              <div class="cm-marker-slot" data-marker="5">
                <div class="cm-marker" data-match="5" draggable="true">E</div>
              </div>
              <div class="cm-marker-slot" data-marker="6">
                <div class="cm-marker" data-match="6" draggable="true">F</div>
              </div>
              <div class="cm-marker-slot" data-marker="7">
                <div class="cm-marker" data-match="7" draggable="true">G</div>
              </div>
            </div>
            
            <!-- Column 3: Traveller Answers (JUMBLED ORDER) -->
            <div class="cm-answers">
              <div class="cm-answer" data-match="5">
                <div class="cm-answer-slot"></div>
                <p>Yes, here it is.</p>
              </div>
              <div class="cm-answer" data-match="3">
                <div class="cm-answer-slot"></div>
                <p>I'm staying at the Grand Hotel.</p>
              </div>
              <div class="cm-answer" data-match="1">
                <div class="cm-answer-slot"></div>
                <p>I'm here for tourism.</p>
              </div>
              <div class="cm-answer" data-match="6">
                <div class="cm-answer-slot"></div>
                <p>No, nothing to declare.</p>
              </div>
              <div class="cm-answer" data-match="7">
                <div class="cm-answer-slot"></div>
                <p>Yes, it's my first time here.</p>
              </div>
              <div class="cm-answer" data-match="2">
                <div class="cm-answer-slot"></div>
                <p>I'm staying for two weeks.</p>
              </div>
              <div class="cm-answer" data-match="4">
                <div class="cm-answer-slot"></div>
                <p>I'm a teacher.</p>
              </div>
            </div>
          </div>
          
          <div class="cm-feedback" id="matching-activity-feedback"></div>
          
          <div class="control-buttons">
            <button id="matching-activity-cm-submit" class="submit-btn">Check Answers</button>
            <button id="matching-activity-cm-restart" class="restart-btn" style="display:none;">Try Again</button>
            <button class="nav-button" id="matching-next" style="visibility:hidden;">Next ‚Üí</button>
          </div>
          
          <div class="score-display cm-score" id="matching-activity-score">
            Your score: <span>0</span>/7
          </div>
        </section>

        <!-- ======================================== -->
        <!-- ACTIVITY 2: DROP-DOWN GAP FILL -->
        <!-- ======================================== -->
        <div id="dropdown-immigration" class="activity-container">
          <h3><i class="fa-solid fa-comment-dots icon-primary"></i> Complete the Conversations</h3>
          <p>Choose the correct word from each drop-down menu to complete the conversation.</p>
          
          <!-- This container is dynamically generated by JavaScript -->
        </div>

        <!-- ======================================== -->
        <!-- ACTIVITY 3: MCQ -->
        <!-- ======================================== -->
        <div id="mcq" class="activity-container">
          <h3><i class="fa-solid fa-circle-check icon-primary"></i> Choose the Correct Answer</h3>
          <p>The officer asks a question. Choose the best answer.</p>
          
          <!-- This container is dynamically generated by JavaScript -->
        </div>

      </section>

      <!-- ======================================== -->
      <!-- SPEAKING PRACTICE DIVIDER -->
      <!-- ======================================== -->
      <hr class="section-divider-beginner">
      
      <section class="intro-section section-divider-intro">
        <h2>üé§ Now It's Your Turn to Speak!</h2>
        <p>You've completed all the activities. Use these conversations to practise speaking with your teacher or a partner.</p>
      </section>

      <!-- ======================================== -->
      <!-- SECTION 4: PRODUCTION - SPEAKING PRACTICE -->
      <!-- ======================================== -->
      <section class="content-section">
        <h2><i class="fa-solid fa-users icon-primary"></i> Speaking Practice</h2>
        <p>Practise these conversations with your teacher or a partner.</p>
        
        <h3>Conversation 1: Tourism Visit</h3>
        <div class="example">
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> Good morning. Can I see your passport, please?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> Of course. Here you are.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> What's the purpose of your visit?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> <span class="grammar-highlight">I'm here for</span> tourism.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> How long are you staying?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> <span class="grammar-highlight">I'm staying for</span> ten days.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> Where will you stay?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> <span class="grammar-highlight">I'm staying at</span> the Park Hotel.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> Okay, welcome. Enjoy your trip.</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> Thank you.</p>
        </div>
        
        <h3>Conversation 2: Business Visit</h3>
        <div class="example">
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> Passport, please.</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> Here you are.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> What's the purpose of your visit?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> <span class="grammar-highlight">I'm here for</span> business.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> What is your job?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> <span class="grammar-highlight">I'm a</span> software engineer.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> How long are you staying?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> <span class="grammar-highlight">I'm staying for</span> five days.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> Do you have your return ticket?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> Yes, here it is.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Officer:</strong> Thank you. Have a good stay.</p>
        </div>
        
        <h3>Conversation 3: At Customs</h3>
        <div class="example">
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Customs Officer:</strong> Do you have anything to declare?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> No, nothing to declare.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Customs Officer:</strong> Can you open your bag, please?</p>
          <p><i class="fa-solid fa-user icon-primary icon-spacing"></i><strong>You:</strong> Of course.</p>
          <p><i class="fa-solid fa-user-tie icon-secondary icon-spacing"></i><strong>Customs Officer:</strong> Thank you. You can go.</p>
        </div>
        
        <h3>Role Play Scenarios</h3>
        <p>Try these situations with your teacher or a partner.</p>
        
        <table class="responsive-table">
          <thead>
            <tr>
              <th>Scenario</th>
              <th>Student A (Traveller)</th>
              <th>Student B (Officer)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>1. Holiday</strong></td>
              <td>You are visiting for tourism. You are staying for one week at the Beach Hotel.</td>
              <td>Ask about purpose of visit, duration, and where they will stay.</td>
            </tr>
            <tr>
              <td><strong>2. Business Trip</strong></td>
              <td>You are here for business. You are a doctor. You are staying for three days.</td>
              <td>Ask about purpose, job, duration, and return ticket.</td>
            </tr>
            <tr>
              <td><strong>3. Visiting Family</strong></td>
              <td>You are visiting your sister. You are staying for two weeks at her house.</td>
              <td>Ask about purpose, duration, where they will stay, and if it is their first visit.</td>
            </tr>
          </tbody>
        </table>
        
        <div class="important-note">
          <p><strong><i class="fa-solid fa-lightbulb icon-secondary"></i> Remember:</strong> Use <strong>"I'm here for..."</strong> for purpose, <strong>"I'm staying for..."</strong> for duration, <strong>"I'm staying at..."</strong> for where, and <strong>"I'm a..."</strong> for your job.</p>
        </div>
      </section>

    </main>
  </div>
  
  <!-- Bottom Navigation -->
  <nav class="bottom-navigation">
    <a href="airport-lesson2.html" class="nav-button previous">‚Üê Previous: On the Airplane</a>
    <div class="center-buttons">
      <button class="nav-button print-button" onclick="window.print()">Print This Page</button>
    </div>
    <a href="airport-lesson4.html" class="nav-button next">Next: Baggage Claim ‚Üí</a>
  </nav>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="../../home.html">Home</a></li>
          <li><a href="travel-english.html">Travel English</a></li>
          <li><a href="../../my-progress.html">My Progress</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Travel Units</h3>
        <ul>
          <li><a href="unit1-airport.html">Unit 1: Airport</a></li>
          <li><a href="unit2-hotel.html">Unit 2: Hotel</a></li>
          <li><a href="unit3-transport.html">Unit 3: Transport</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <ul>
          <li><a href="../../about.html">About</a></li>
          <li><a href="../../contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>¬© 2025 English in Doses | All rights reserved | <a href="../../license.html">Licensing Information</a></p>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="../../js/core.js"></script>
  <script src="../../js/vocab-match.js"></script>
  <script src="../../js/flash-cards.js"></script>
  <script src="../../js/compact-matching.js"></script>
  <script src="../../js/drop-down.js"></script>
  <script src="../../js/mcq.js"></script>
  <script src="../../js/activity-nav.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      
      // ============================================
      // QUESTION SET TRACKING (Sequential)
      // ============================================
      let dropdownSetIndex = 0;
      let mcqSetIndex = 0;
      
      // ============================================
      // DROPDOWN GAP-FILL POOLS (4 sets)
      // Each gap has: answer + options (shuffled at render)
      // ============================================
      const dropdownPools = [
        // Set 1: Tourism visit
        {
          conversation: [
            { speaker: 'Officer', text: 'Good morning. Can I see your ', suffix: ', please?', gap: { answer: 'passport', options: ['passport', 'terminal', 'gate'] } },
            { speaker: 'You', text: 'Of course. Here you are.' },
            { speaker: 'Officer', text: 'What\'s the purpose of your visit?' },
            { speaker: 'You', text: 'I\'m here for ', suffix: '.', gap: { answer: 'tourism', options: ['tourism', 'a kiosk', 'a seatbelt'] } },
            { speaker: 'Officer', text: 'How long are you staying?' },
            { speaker: 'You', text: 'I\'m staying for ', suffix: '.', gap: { answer: 'two weeks', options: ['two weeks', 'a suitcase', 'a blanket'] } },
            { speaker: 'Officer', text: 'Where will you stay?' },
            { speaker: 'You', text: 'I\'m ', suffix: ' at the Park Hotel.', gap: { answer: 'staying', options: ['staying', 'going', 'living'] } }
          ]
        },
        // Set 2: Business visit
        {
          conversation: [
            { speaker: 'Officer', text: 'Passport, please.' },
            { speaker: 'You', text: 'Here you are.' },
            { speaker: 'Officer', text: 'What\'s the purpose of your visit?' },
            { speaker: 'You', text: 'I\'m here for ', suffix: '.', gap: { answer: 'business', options: ['business', 'a laptop', 'a terminal'] } },
            { speaker: 'Officer', text: 'What is your job?' },
            { speaker: 'You', text: 'I\'m an ', suffix: '.', gap: { answer: 'engineer', options: ['engineer', 'tourism', 'airport'] } },
            { speaker: 'Officer', text: 'How long are you staying?' },
            { speaker: 'You', text: 'I\'m staying for ', suffix: '.', gap: { answer: 'five days', options: ['five days', 'a gate', 'a boarding pass'] } },
            { speaker: 'Officer', text: 'Do you have your ', suffix: ' ticket?', gap: { answer: 'return', options: ['return', 'bus', 'train'] } },
            { speaker: 'You', text: 'Yes, here it is.' }
          ]
        },
        // Set 3: Visiting family
        {
          conversation: [
            { speaker: 'Officer', text: 'What\'s the purpose of your visit?' },
            { speaker: 'You', text: 'I\'m visiting my ', suffix: '.', gap: { answer: 'family', options: ['family', 'hotel', 'office'] } },
            { speaker: 'Officer', text: 'Who are you visiting?' },
            { speaker: 'You', text: 'My ', suffix: '.', gap: { answer: 'sister', options: ['sister', 'hotel', 'office'] } },
            { speaker: 'Officer', text: 'How long are you staying?' },
            { speaker: 'You', text: 'I\'m staying for ', suffix: '.', gap: { answer: 'three weeks', options: ['three weeks', 'a stamp', 'a pillow'] } },
            { speaker: 'Officer', text: 'Is this your ', suffix: ' visit?', gap: { answer: 'first', options: ['first', 'last', 'next'] } },
            { speaker: 'You', text: 'No, I was here last year.' }
          ]
        },
        // Set 4: Short holiday
        {
          conversation: [
            { speaker: 'Officer', text: 'What\'s the purpose of your visit?' },
            { speaker: 'You', text: 'I\'m here on ', suffix: '.', gap: { answer: 'holiday', options: ['holiday', 'luggage', 'customs'] } },
            { speaker: 'Officer', text: 'How long are you staying?' },
            { speaker: 'You', text: 'I\'m staying for ', suffix: '.', gap: { answer: 'one week', options: ['one week', 'a visa', 'a laptop'] } },
            { speaker: 'Officer', text: 'Where will you stay?' },
            { speaker: 'You', text: 'At a ', suffix: ' in the city centre.', gap: { answer: 'hotel', options: ['hotel', 'office', 'airport'] } },
            { speaker: 'Officer', text: 'Welcome. Enjoy your trip.' },
            { speaker: 'Customs Officer', text: 'Do you have anything to ', suffix: '?', gap: { answer: 'declare', options: ['declare', 'say', 'give'] } },
            { speaker: 'You', text: 'No, nothing to declare.' }
          ]
        }
      ];
      
      // ============================================
      // MCQ QUESTION POOLS (4 sets of 5 questions)
      // 3 options each, question only (no context)
      // ============================================
      const mcqPools = [
        // Set 1
        [
          {
            question: '"What\'s the purpose of your visit?"',
            options: ['I\'m here for tourism.', 'I like holidays.', 'I go to the beach.'],
            correct: 0,
            correctExplanation: '"I\'m here for tourism" directly answers the question about purpose.',
            incorrectExplanation: 'The best answer is "I\'m here for tourism." Use "I\'m here for..." to say the purpose.'
          },
          {
            question: '"How long are you staying?"',
            options: ['I stay long.', 'I\'m staying for one week.', 'I like it here.'],
            correct: 1,
            correctExplanation: '"I\'m staying for one week" gives a clear duration.',
            incorrectExplanation: 'The best answer is "I\'m staying for one week." Always say the number of days or weeks.'
          },
          {
            question: '"Where will you stay?"',
            options: ['I\'m staying at the Hilton Hotel.', 'In a bed.', 'I stay good.'],
            correct: 0,
            correctExplanation: '"I\'m staying at the Hilton Hotel" gives a clear place.',
            incorrectExplanation: 'The best answer is "I\'m staying at the Hilton Hotel." Say the name of the hotel or place.'
          },
          {
            question: '"Do you have anything to declare?"',
            options: ['I have a suitcase.', 'No, nothing to declare.', 'I don\'t understand.'],
            correct: 1,
            correctExplanation: '"No, nothing to declare" is the correct response when you have no special goods.',
            incorrectExplanation: 'The best answer is "No, nothing to declare." Clothes and personal items do not need to be declared.'
          },
          {
            question: '"What is your job?"',
            options: ['I work very hard.', 'I\'m a nurse.', 'At a hospital.'],
            correct: 1,
            correctExplanation: '"I\'m a nurse" directly answers the question about your job.',
            incorrectExplanation: 'The best answer is "I\'m a nurse." Use "I\'m a..." to say your job title.'
          }
        ],
        // Set 2
        [
          {
            question: '"Can I see your passport, please?"',
            options: ['No, thank you.', 'Of course. Here you are.', 'What passport?'],
            correct: 1,
            correctExplanation: '"Of course. Here you are." is polite and gives the officer your passport.',
            incorrectExplanation: 'The best answer is "Of course. Here you are." Always have your passport ready.'
          },
          {
            question: '"Is this your first visit?"',
            options: ['I visit many countries.', 'Yes, it\'s my first time here.', 'I don\'t visit much.'],
            correct: 1,
            correctExplanation: '"Yes, it\'s my first time here" clearly answers the question.',
            incorrectExplanation: 'The best answer is "Yes, it\'s my first time here."'
          },
          {
            question: '"What\'s the purpose of your visit?"',
            options: ['I\'m here to visit my family.', 'I have a family.', 'My family is nice.'],
            correct: 0,
            correctExplanation: '"I\'m here to visit my family" clearly explains your purpose.',
            incorrectExplanation: 'The best answer is "I\'m here to visit my family." It directly answers the question.'
          },
          {
            question: '"Do you have your return ticket?"',
            options: ['I want to return.', 'Yes, here it is.', 'What is a return ticket?'],
            correct: 1,
            correctExplanation: '"Yes, here it is." is the correct answer when you have your ticket.',
            incorrectExplanation: 'The best answer is "Yes, here it is." Show the officer your return ticket.'
          },
          {
            question: '"How long are you staying?"',
            options: ['Three days is short.', 'Not very long.', 'I\'m staying for three days.'],
            correct: 2,
            correctExplanation: '"I\'m staying for three days" gives a clear and specific answer.',
            incorrectExplanation: 'The best answer is "I\'m staying for three days." Be specific about the duration.'
          }
        ],
        // Set 3
        [
          {
            question: '"Can you open your bag, please?"',
            options: ['No, I can\'t.', 'Of course.', 'It\'s my bag.'],
            correct: 1,
            correctExplanation: '"Of course." is polite and cooperative. Always cooperate at customs.',
            incorrectExplanation: 'The best answer is "Of course." Be polite and cooperate with customs officers.'
          },
          {
            question: '"What\'s the purpose of your visit?"',
            options: ['I work a lot.', 'I\'m here for business.', 'I like working.'],
            correct: 1,
            correctExplanation: '"I\'m here for business" is the standard answer for a work visit.',
            incorrectExplanation: 'The best answer is "I\'m here for business." Use "I\'m here for..." to say the purpose.'
          },
          {
            question: '"Where will you stay?"',
            options: ['I have a friend.', 'I\'m staying with a friend.', 'My friend is nice.'],
            correct: 1,
            correctExplanation: '"I\'m staying with a friend" clearly answers where you will stay.',
            incorrectExplanation: 'The best answer is "I\'m staying with a friend."'
          },
          {
            question: '"What is your job?"',
            options: ['I study a lot.', 'I\'m a student.', 'At the university.'],
            correct: 1,
            correctExplanation: '"I\'m a student" directly and clearly answers the question.',
            incorrectExplanation: 'The best answer is "I\'m a student." Use "I\'m a..." for your job or occupation.'
          },
          {
            question: '"Welcome. Enjoy your trip."',
            options: ['Okay, bye.', 'Thank you.', 'Yes.'],
            correct: 1,
            correctExplanation: '"Thank you." is the most polite and natural response.',
            incorrectExplanation: 'The best answer is "Thank you." It is polite and friendly.'
          }
        ],
        // Set 4
        [
          {
            question: '"How long are you staying?"',
            options: ['A long time.', 'I\'m staying for two months.', 'Many days.'],
            correct: 1,
            correctExplanation: '"I\'m staying for two months" gives a clear and specific duration.',
            incorrectExplanation: 'The best answer is "I\'m staying for two months." Always give a specific time.'
          },
          {
            question: '"What\'s the purpose of your visit?"',
            options: ['I\'m here to study English.', 'English is good.', 'I study.'],
            correct: 0,
            correctExplanation: '"I\'m here to study English" clearly states your purpose.',
            incorrectExplanation: 'The best answer is "I\'m here to study English."'
          },
          {
            question: '"Is this your first visit?"',
            options: ['I visit a lot.', 'No, I was here last year.', 'Maybe.'],
            correct: 1,
            correctExplanation: '"No, I was here last year." clearly answers the question.',
            incorrectExplanation: 'The best answer is "No, I was here last year." Give a short, clear answer.'
          },
          {
            question: '"Can I see your passport, please?"',
            options: ['I don\'t have one.', 'One moment, please.', 'What?'],
            correct: 1,
            correctExplanation: '"One moment, please." is polite and lets the officer know you are looking for it.',
            incorrectExplanation: 'The best answer is "One moment, please." It is polite while you look for your passport.'
          },
          {
            question: '"Do you have anything to declare?"',
            options: ['Maybe.', 'I don\'t know.', 'Yes, I have some perfume.'],
            correct: 2,
            correctExplanation: '"Yes, I have some perfume." You should declare expensive items.',
            incorrectExplanation: 'The best answer is "Yes, I have some perfume." Always declare items if you are not sure.'
          }
        ]
      ];
      
      // ============================================
      // UTILITY: Shuffle an array
      // ============================================
      function shuffleArray(arr) {
        const shuffled = [...arr];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
      }
      
      // ============================================
      // DROPDOWN GAP-FILL GENERATION
      // ============================================
      function generateDropdown(setIndex) {
        const container = document.getElementById('dropdown-immigration');
        if (!container) return;
        
        const set = dropdownPools[setIndex % dropdownPools.length];
        const activityId = 'dropdown-conv';
        
        let html = '<h3><i class="fa-solid fa-comment-dots icon-primary"></i> Complete the Conversation</h3>';
        html += '<p>Choose the correct word from each drop-down menu to complete the conversation.</p>';
        
        html += '<div id="' + activityId + '" class="dropdown-activity">';
        
        let gapCount = 0;
        
        set.conversation.forEach(function(line) {
          if (line.gap) {
            gapCount++;
            var shuffledOptions = shuffleArray(line.gap.options);
            
            var selectHtml = '<select class="gap-dropdown" data-answer="' + line.gap.answer + '">';
            selectHtml += '<option value="" disabled selected>Choose...</option>';
            shuffledOptions.forEach(function(opt) {
              selectHtml += '<option value="' + opt + '">' + opt + '</option>';
            });
            selectHtml += '</select>';
            
            var suffix = line.suffix || '';
            
            html += '<div class="dropdown-sentence">';
            html += '<span class="sentence-number">' + gapCount + '</span>';
            html += '<strong>' + line.speaker + ':</strong> ' + line.text + selectHtml + suffix;
            html += '</div>';
          } else {
            html += '<p class="gap-fill-sentence"><strong>' + line.speaker + ':</strong> ' + line.text + '</p>';
          }
        });
        
        html += '</div>';
        
        // Feedback and controls
        html += '<div id="' + activityId + 'Feedback" class="feedback"></div>';
        html += '<div class="control-buttons">';
        html += '<button class="nav-button" id="dropdown-prev">‚Üê Previous</button>';
        html += '<button id="dropdown-check" class="submit-btn">Check Answers</button>';
        html += '<button id="dropdown-restart" class="restart-btn" style="display:none;">Try Again</button>';
        html += '<button class="nav-button" id="dropdown-next">Next ‚Üí</button>';
        html += '</div>';
        html += '<div class="dropdown-score" id="dropdown-score" style="display:none;">';
        html += 'Your score: <span>0</span>/' + gapCount;
        html += '</div>';
        
        container.innerHTML = html;
        
        // Attach change listeners to new dropdowns
        container.querySelectorAll('.gap-dropdown').forEach(function(dropdown) {
          dropdown.addEventListener('change', function() {
            if (this.value !== '') {
              this.classList.add('answered');
            } else {
              this.classList.remove('answered');
            }
            this.classList.remove('correct', 'dd-incorrect');
            var sentence = this.closest('.dropdown-sentence');
            if (sentence) {
              sentence.classList.remove('correct', 'dd-incorrect');
            }
          });
        });
        
        // Check button
        document.getElementById('dropdown-check').addEventListener('click', function() {
          checkDropdownAnswers(activityId);
          var restartBtn = document.getElementById('dropdown-restart');
          if (restartBtn) restartBtn.style.display = '';
        });
        
        // Restart button - loads next set
        document.getElementById('dropdown-restart').addEventListener('click', function() {
          dropdownSetIndex++;
          setTimeout(function() { generateDropdown(dropdownSetIndex); }, 100);
        });
        
        // Navigation buttons
        document.getElementById('dropdown-prev').addEventListener('click', function() {
          document.querySelector('[data-activity="matching"]').click();
        });
        
        document.getElementById('dropdown-next').addEventListener('click', function() {
          document.querySelector('[data-activity="mcq"]').click();
        });
      }
      
      // ============================================
      // MCQ GENERATION
      // ============================================
      function generateMCQ(setIndex) {
        const container = document.getElementById('mcq');
        if (!container) return;
        
        const set = mcqPools[setIndex % mcqPools.length];
        
        let html = '<h3><i class="fa-solid fa-circle-check icon-primary"></i> Choose the Correct Answer</h3>';
        html += '<p>The officer asks a question. Choose the best answer.</p>';
        
        const answers = {};
        const correctExplanations = {};
        const incorrectExplanations = {};
        
        set.forEach((q, index) => {
          const qId = `q${index + 1}`;
          answers[qId] = q.correct;
          correctExplanations[qId] = q.correctExplanation;
          incorrectExplanations[qId] = q.incorrectExplanation;
          
          html += `<div class="question" id="${qId}">`;
          html += `<p class="question-text">${index + 1}. ${q.question}</p>`;
          html += '<div class="options">';
          
          const labels = ['A', 'B', 'C'];
          q.options.forEach((opt, optIndex) => {
            html += `<div class="option" data-index="${optIndex}"><span>${labels[optIndex]}. ${opt}</span></div>`;
          });
          
          html += '</div>';
          html += '<div class="feedback"></div>';
          html += '</div>';
        });
        
        // Controls
        html += `
          <div class="control-buttons">
            <button class="nav-button" id="mcq-prev">‚Üê Previous</button>
            <button id="mcq-submit" class="submit-btn">Check Answers</button>
            <button id="mcq-restart" class="restart-btn" style="display:none;">Try Again</button>
          </div>
          <div class="score-display" id="mcq-score" style="display:none;">
            Your score: <span>0</span>/5
          </div>
        `;
        
        container.innerHTML = html;
        
        // Re-initialize MCQ
        MCQModule.init({
          containerId: 'mcq',
          answers: answers,
          correctExplanations: correctExplanations,
          incorrectExplanations: incorrectExplanations,
          showAllQuestionsAtOnce: true,
          onComplete: function(score, total) {
            console.log('MCQ completed:', score, '/', total);
          }
        });
        
        // Restart loads next set
        const restartBtn = document.getElementById('mcq-restart');
        if (restartBtn) {
          restartBtn.addEventListener('click', function() {
            mcqSetIndex++;
            setTimeout(() => generateMCQ(mcqSetIndex), 100);
          });
        }
        
        // Navigation
        const prevBtn = document.getElementById('mcq-prev');
        if (prevBtn) {
          prevBtn.addEventListener('click', function() {
            document.querySelector('[data-activity="dropdown-immigration"]').click();
          });
        }
      }
      
      // ============================================
      // VOCABULARY CAROUSEL + WORD BANK FILTERING
      // ============================================
      
      // Initialize Vocabulary Matching
      VocabMatchModule.init({
        containerId: 'vocab-match',
        onComplete: function(score, total) {
          console.log('Vocabulary matching completed:', score, '/', total);
        }
      });
      
      // Filter word bank by page
      function filterWordsByPage(pageIndex) {
        const wordBank = document.querySelector('#vocab-match .vocab-words-container');
        if (!wordBank) return;
        
        const allWords = wordBank.querySelectorAll('.vocab-word-item');
        allWords.forEach(word => {
          const wordPage = parseInt(word.getAttribute('data-page'));
          if (wordPage === pageIndex && !word.classList.contains('placed')) {
            word.style.display = '';
          } else {
            word.style.display = 'none';
          }
        });
      }
      
      // Show only page 0 words on initial load
      filterWordsByPage(0);
      
      // Hook into carousel navigation
      const vocabContainer = document.getElementById('vocab-match');
      const prevBtn = vocabContainer.querySelector('.vocab-carousel-prev');
      const nextBtn = vocabContainer.querySelector('.vocab-carousel-next');
      const dots = vocabContainer.querySelectorAll('.vocab-carousel-dot');
      
      let currentVocabPage = 0;
      const totalVocabPages = 2;
      
      prevBtn.addEventListener('click', function() {
        if (currentVocabPage > 0) {
          currentVocabPage--;
          filterWordsByPage(currentVocabPage);
        }
      });
      
      nextBtn.addEventListener('click', function() {
        if (currentVocabPage < totalVocabPages - 1) {
          currentVocabPage++;
          filterWordsByPage(currentVocabPage);
        }
      });
      
      dots.forEach(dot => {
        dot.addEventListener('click', function() {
          currentVocabPage = parseInt(this.getAttribute('data-page'));
          filterWordsByPage(currentVocabPage);
        });
      });
      
      const vocabResetBtn = vocabContainer.querySelector('.vocab-reset-btn');
      if (vocabResetBtn) {
        vocabResetBtn.addEventListener('click', function() {
          currentVocabPage = 0;
          setTimeout(() => filterWordsByPage(0), 100);
        });
      }
      
      // ============================================
      // INITIALIZE ALL MODULES
      // ============================================
      
      // Initialize Flashcards
      FlashcardModule.init({
        containerId: 'flashcards'
      });
      
      // Initialize Compact Matching
      CompactMatchingModule.init({
        containerId: 'matching-activity',
        onComplete: function(score, total) {
          console.log('Matching completed:', score, '/', total);
          const nextBtn = document.getElementById('matching-next');
          if (nextBtn) nextBtn.style.visibility = 'visible';
        }
      });
      
      // Matching navigation
      const matchingNext = document.getElementById('matching-next');
      if (matchingNext) {
        matchingNext.addEventListener('click', function() {
          document.querySelector('[data-activity="dropdown-immigration"]').click();
        });
      }
      
      // Generate initial activities with Set 1
      generateDropdown(0);
      generateMCQ(0);
      
      // Initialize Activity Navigation
      ActivityNavModule.init({
        containerId: 'activity-nav',
        activities: ['matching', 'dropdown-immigration', 'mcq'],
        onActivityChange: function(activityId) {
          console.log('Activity changed to:', activityId);
        }
      });
      
    });
  </script>
</body>
</html>
