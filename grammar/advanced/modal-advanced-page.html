<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Include standardized head content -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Advanced Modal Meanings: reproach, criticism, and probability - Advanced ESL grammar explanation with examples and practice">
  <title>Advanced Modal Meanings - Advanced ESL Grammar</title>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&family=Source+Code+Pro&display=swap" rel="stylesheet">
  
  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../../images//favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../images//favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  
  <!-- Styles -->
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/activities.css">
  <link rel="stylesheet" href="../../css/progress-tracking-styles.css">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="../../images/favicon.png">

  <style>
    /* Fix progress bar styling */
    .progress-container {
      margin-bottom: 30px;
      padding-bottom: 10px;
      clear: both;
    }
    
    .progress-container h4 {
      margin-top: 0;
      margin-bottom: 8px;
      font-size: 1rem;
    }
    
    /* Make sure all MCQ questions remain visible */
    #mcq .question {
      display: block !important;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border-color, #ddd);
    }
    
    .activity-container.active {
      display: block !important;
    }
    
    /* Ensure proper spacing between options */
    .options {
      margin-bottom: 15px;
    }
    
    /* Make sure feedback is visible */
    .feedback {
      margin-top: 10px;
      min-height: 20px;
    }

    /* Example highlighting */
    .modal-highlight {
      font-weight: bold;
      color: var(--accent-color, #3498db);
    }

    /* Table alignments */
    .meaning-table td:first-child {
      width: 15%;
      font-weight: bold;
    }

    .meaning-table td:nth-child(2) {
      width: 45%;
    }

    .meaning-table td:nth-child(3) {
      width: 40%;
    }

    /* Emphasis on context */
    .context-note {
      font-style: italic;
      color: #666;
      font-size: 0.9em;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <!-- Include skip link and theme toggle -->
  <a href="#main-content" class="skip-link">Skip to content</a>
  
  <div class="theme-toggle-container">
    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
      <span class="light-icon">‚òÄÔ∏è</span>
      <span class="dark-icon">üåô</span>
    </button>
  </div>
  
  <!-- Include navigation -->
  <nav class="main-navigation">
    <a href="../../home.html" class="site-logo">
      <img src="../../images/my-logo.svg" alt="English in Doses" width="150" height="auto">
    </a>
    <button class="nav-toggle" aria-label="Toggle navigation">‚ò∞</button>
    <div class="nav-links">
      <a href="../../home.html" class="nav-link">Home</a>
      <a href="../../about.html" class="nav-link">About Us</a>
      <a href="../../contact.html" class="nav-link">Contact Us</a>
      <a href="../../home.html#where-to-start" class="nav-link">Grammar</a>
      <a href="../../extra-practice.html" class="nav-link">Extra Practice</a>
      <a href="../../conversation-page.html" class="nav-link">Conversation</a>
      <a href="../../my-progress.html" class="nav-link">My Progress</a>
    </div>

    <div class="advanced-nav-indicator"></div>
  </nav>

  <div class="container">
    <!-- Include breadcrumbs -->
    <div class="breadcrumbs" aria-label="breadcrumb">
      <span class="breadcrumb-item"><a href="../../home.html">Home</a></span>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-item"><a href="advanced-grammar.html">Advanced Grammar</a></span>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-item"><a href="advanced-grammar.html#modals">Modal Verbs</a></span>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-item">Advanced Modal Meanings</span>
    </div>

    <main id="main-content">
      <h1>Advanced Modal Meanings</h1>

      <!-- Progress tracking display -->
      <div class="progress-container">
        <h4>Your Progress</h4>
        <div id="activity-progress" data-progress-display data-progress-type="bar" 
             data-category="activities" data-item-id="modal-advanced-meanings"></div>
      </div>

      <!-- INTRODUCTION SECTION -->
      <section class="intro-section">
        <h2>Introduction</h2>
        <p>Modal verbs in English go far beyond expressing simple concepts like ability (can) or obligation (must). At an advanced level, modals express subtle meanings like reproach, criticism, and varying degrees of probability, which are essential for natural, nuanced communication in English.</p>
        
        <h3>After this lesson, you will be able to:</h3>
        <ul>
          <li>Use modal verbs to express reproach, regret, and criticism about past actions</li>
          <li>Express different degrees of probability about present and past situations</li>
          <li>Recognize and respond to the subtle shades of meaning in modal verbs</li>
        </ul>
      </section>

      <!-- GRAMMAR POINT SECTION 1 -->
      <section class="grammar-point">
        <h2>Modal Verbs for Reproach and Criticism</h2>
        
        <p><strong>Expressing reproach about past actions</strong>: We often use modal verbs to suggest someone should or shouldn't have done something in the past.</p>
        
        <p><strong>Structure</strong>: subject + modal verb + have + past participle</p>
        
        <div class="example">
          <ol>
            <li>You <span class="modal-highlight">should have called</span> me yesterday. (I expected you to call, but you didn't)</li>
            <li>He <span class="modal-highlight">shouldn't have said</span> that to his boss. (What he said was inappropriate)</li>
            <li>They <span class="modal-highlight">could have told</span> us about the problem earlier. (They had the opportunity but didn't)</li>
          </ol>
        </div>
        
        <div class="note">
          <p><strong>Native speaker note:</strong> In spoken English, "should have" is often contracted to "should've" and sometimes incorrectly written as "should of" in informal contexts. Always use "should have" in your writing.</p>
        </div>

        <p><strong>Degrees of criticism and reproach:</strong></p>
        <ul>
          <li><strong>Should have/shouldn't have</strong>: The strongest form of criticism or advice about a past action</li>
          <li><strong>Could have</strong>: Indicates a missed opportunity or alternative</li>
          <li><strong>Might have</strong>: Suggests a possibility that wasn't taken</li>
          <li><strong>Needn't have</strong>: Indicates unnecessary action that was taken</li>
        </ul>
      </section>

      <!-- GRAMMAR POINT SECTION 2 -->
      <section class="grammar-point">
        <h2>Modal Verbs for Expressing Probability</h2>
        
        <p><strong>Expressing different degrees of certainty</strong>: Modal verbs help us show how sure or unsure we are about something.</p>
        
        <p><strong>About present situations:</strong></p>
        
        <div class="example">
          <ol>
            <li>She <span class="modal-highlight">must be</span> at home. Her car is in the driveway. (95% certain)</li>
            <li>He <span class="modal-highlight">will be</span> in his office now. He always works until 6. (90% certain)</li>
            <li>They <span class="modal-highlight">should be</span> at the meeting by now. (80% certain)</li>
            <li>She <span class="modal-highlight">may/might/could be</span> busy at the moment. (50% certain)</li>
            <li>He <span class="modal-highlight">can't be</span> serious about that suggestion. (0% certain - negative certainty)</li>
          </ol>
        </div>
        
        <p><strong>About past situations:</strong></p>
        
        <div class="example">
          <ol>
            <li>She <span class="modal-highlight">must have been</span> very tired after the marathon. (95% certain)</li>
            <li>He <span class="modal-highlight">will have arrived</span> in London by now. (90% certain)</li>
            <li>They <span class="modal-highlight">should have received</span> our email by yesterday. (80% certain)</li>
            <li>She <span class="modal-highlight">may/might/could have forgotten</span> about our appointment. (50% certain)</li>
            <li>He <span class="modal-highlight">can't have finished</span> the project already - it's too complex. (0% certain - negative certainty)</li>
          </ol>
        </div>
        
        <div class="note">
          <p><strong>Native speaker note:</strong> Context is crucial when interpreting modals. For example, "must" can express obligation ("You must attend") or high probability ("You must be joking"). Listen for tone of voice and context clues.</p>
        </div>
      </section>

      <!-- GRAMMAR POINT SECTION 3 -->
      <section class="grammar-point" id="grammar-summary">
        <h2>Other Advanced Modal Meanings</h2>
        
        <p><strong>Expressing missed opportunities and alternatives</strong>: Modal verbs can express regret about what did or didn't happen.</p>
        
        <div class="example">
          <ol>
            <li>If I'd known you were coming, I <span class="modal-highlight">would have prepared</span> something special. (hypothetical past result)</li>
            <li>I <span class="modal-highlight">needn't have bought</span> so much food. Most of it went to waste. (unnecessary past action)</li>
            <li>You <span class="modal-highlight">didn't need to pay</span> for everyone. We could have split the bill. (factual - action happened but wasn't necessary)</li>
          </ol>
        </div>
        
        <p><strong>Expressing regret:</strong></p>
        
        <div class="example">
          <ol>
            <li>I <span class="modal-highlight">should have studied</span> harder for the exam. (I regret not studying harder)</li>
            <li>We <span class="modal-highlight">shouldn't have ignored</span> the warning signs. (We regret ignoring them)</li>
            <li>I <span class="modal-highlight">wish I could have attended</span> your wedding. (I regret that I couldn't attend)</li>
          </ol>
        </div>

        <p><strong>The difference between "needn't have done" and "didn't need to do":</strong></p>
        <ul>
          <li><strong>Needn't have done</strong>: The action WAS done, but it was unnecessary (regret/reproach)</li>
          <li><strong>Didn't need to do</strong>: The action WAS NOT done because it was unnecessary (neutral statement)</li>
        </ul>
        
        <div class="example">
          <p>You <span class="modal-highlight">needn't have bought</span> me a gift. (You did buy a gift, but it wasn't necessary)</p>
          <p>You <span class="modal-highlight">didn't need to buy</span> me a gift. (You didn't buy a gift, which was fine)</p>
        </div>
      </section>

      <!-- VISUAL COMPARISON TABLE -->
      <section>
        <h2>Summary of Advanced Modal Meanings</h2>
        <table class="meaning-table">
          <thead>
            <tr>
              <th>Modal</th>
              <th>Function</th>
              <th>Example</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>should have</td>
              <td>Criticism or reproach about past actions; regret</td>
              <td><span class="example">You should have told me earlier.</span></td>
            </tr>
            <tr>
              <td>could have</td>
              <td>Missed opportunity; alternative that wasn't taken</td>
              <td><span class="example">We could have taken the train instead.</span></td>
            </tr>
            <tr>
              <td>must be</td>
              <td>Strong probability about the present (95% certain)</td>
              <td><span class="example">She must be at home now.</span></td>
            </tr>
            <tr>
              <td>must have been</td>
              <td>Strong probability about the past (95% certain)</td>
              <td><span class="example">They must have been delayed by traffic.</span></td>
            </tr>
            <tr>
              <td>will be</td>
              <td>High certainty about present (90% certain)</td>
              <td><span class="example">He'll be in his office at this time.</span></td>
            </tr>
            <tr>
              <td>may/might/could be</td>
              <td>Possibility about the present (50% certain)</td>
              <td><span class="example">She might be working from home today.</span></td>
            </tr>
            <tr>
              <td>may/might/could have</td>
              <td>Possibility about the past (50% certain)</td>
              <td><span class="example">He might have missed the bus.</span></td>
            </tr>
            <tr>
              <td>can't be</td>
              <td>Impossibility about the present (0% certain)</td>
              <td><span class="example">That can't be John - he's in Spain!</span></td>
            </tr>
            <tr>
              <td>can't have been</td>
              <td>Impossibility about the past (0% certain)</td>
              <td><span class="example">She can't have been at the meeting.</span></td>
            </tr>
            <tr>
              <td>needn't have</td>
              <td>Unnecessary past action (action was done)</td>
              <td><span class="example">You needn't have waited for me.</span></td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- COMMON ERRORS SECTION -->
      <section class="common-errors">
        <h2 class="common-errors-heading">Common Errors</h2>
        
        <div class="error-pattern">
          <p class="error-title"><strong>1: Using wrong form after modal verbs</strong></p>
          <p class="incorrect">She should to have called earlier.</p>
          <p class="correct">She should have called earlier. ‚úì</p>
          <p class="explanation"><em>After modal verbs, use the base form of "have" (not "to have").</em></p>
        </div>
        
        <div class="error-pattern">
          <p class="error-title"><strong>2: Confusing "should have" and "should"</strong></p>
          <p class="incorrect">You should called yesterday. (past criticism)</p>
          <p class="correct">You should have called yesterday. ‚úì</p>
          <p class="explanation"><em>For criticism about past actions, use "modal + have + past participle".</em></p>
        </div>
        
        <div class="error-pattern">
          <p class="error-title"><strong>3: Misusing "must have" and "must be"</strong></p>
          <p class="incorrect">He must have at the office now.</p>
          <p class="correct">He must be at the office now. ‚úì</p>
          <p class="explanation"><em>Use "must be" for present probability and "must have been" for past probability.</em></p>
        </div>
        
        <div class="error-pattern">
          <p class="error-title"><strong>4: Confusing "needn't have done" and "didn't need to do"</strong></p>
          <p class="incorrect">I didn't need to buy the tickets because they gave us free passes. (But I did buy them)</p>
          <p class="correct">I needn't have bought the tickets because they gave us free passes. ‚úì</p>
          <p class="explanation"><em>"Needn't have done" means the action happened but was unnecessary. "Didn't need to do" means the action didn't happen because it wasn't necessary.</em></p>
        </div>
      </section>

      <!-- TIPS SECTION -->
      <section class="tips">
        <h2 class="tips-heading">Useful Tips</h2>
        
        <div class="grammar-tip">
          <p>üìù <strong>TIP 1:</strong> Pay attention to the context to understand the exact meaning of modal verbs. The same modal can express different meanings in different situations.</p>
        </div>
        
        <div class="grammar-tip">
          <p>üìù <strong>TIP 2:</strong> For past criticism or reproach, always use the structure "modal + have + past participle" (e.g., should have done, could have gone).</p>
        </div>
        
        <div class="grammar-tip">
          <p>üìù <strong>TIP 3:</strong> To express different degrees of probability, remember this scale: must be (95%) ‚Üí will be (90%) ‚Üí should be (80%) ‚Üí may/might/could be (50%) ‚Üí can't be (0%).</p>
        </div>
        
        <div class="grammar-tip">
          <p>üìù <strong>TIP 4:</strong> When expressing regret about past actions, "should have + past participle" is the most common structure in English.</p>
        </div>
      </section>

      <!-- MCQ PRACTICE SECTION -->
      <section class="content-section mcq-container">
        <h2>Quick Practice</h2>
        <p>Test your understanding of advanced modal meanings with these multiple choice questions.</p>
        
        <div id="mcq" class="activity-container active">
          <div class="question" id="q1">
            <p class="mcq-question">1. "You _____ told me about the meeting. I missed it completely!"</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q1-option0" name="q1" value="0">
                <label for="q1-option0">should</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q1-option1" name="q1" value="1">
                <label for="q1-option1">should have</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q1-option2" name="q1" value="2">
                <label for="q1-option2">must</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q1-option3" name="q1" value="3">
                <label for="q1-option3">will</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="question" id="q2">
            <p class="mcq-question">2. "I can see her car in the driveway. She _____ at home."</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q2-option0" name="q2" value="0">
                <label for="q2-option0">must be</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q2-option1" name="q2" value="1">
                <label for="q2-option1">must have been</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q2-option2" name="q2" value="2">
                <label for="q2-option2">should have been</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q2-option3" name="q2" value="3">
                <label for="q2-option3">could been</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="question" id="q3">
            <p class="mcq-question">3. "You _____ so much food. Most of it went to waste!"</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q3-option0" name="q3" value="0">
                <label for="q3-option0">needn't have bought</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q3-option1" name="q3" value="1">
                <label for="q3-option1">didn't need to buy</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q3-option2" name="q3" value="2">
                <label for="q3-option2">mustn't have bought</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q3-option3" name="q3" value="3">
                <label for="q3-option3">shouldn't buy</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="question" id="q4">
            <p class="mcq-question">4. "That _____ John. He's on holiday in Spain."</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q4-option0" name="q4" value="0">
                <label for="q4-option0">must be</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q4-option1" name="q4" value="1">
                <label for="q4-option1">might be</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q4-option2" name="q4" value="2">
                <label for="q4-option2">should be</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q4-option3" name="q4" value="3">
                <label for="q4-option3">can't be</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="question" id="q5">
            <p class="mcq-question">5. "We _____ the earlier train, but we decided to wait for you."</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q5-option0" name="q5" value="0">
                <label for="q5-option0">should take</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q5-option1" name="q5" value="1">
                <label for="q5-option1">could have taken</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q5-option2" name="q5" value="2">
                <label for="q5-option2">must have taken</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q5-option3" name="q5" value="3">
                <label for="q5-option3">will take</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="question" id="q6">
            <p class="mcq-question">6. "She's been working all night. She _____ exhausted."</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q6-option0" name="q6" value="0">
                <label for="q6-option0">must be</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q6-option1" name="q6" value="1">
                <label for="q6-option1">must have been</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q6-option2" name="q6" value="2">
                <label for="q6-option2">should be</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q6-option3" name="q6" value="3">
                <label for="q6-option3">can't be</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="question" id="q7">
            <p class="mcq-question">7. "Sarah _____ seen the email yet, because she hasn't replied."</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q7-option0" name="q7" value="0">
                <label for="q7-option0">mustn't have</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q7-option1" name="q7" value="1">
                <label for="q7-option1">shouldn't have</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q7-option2" name="q7" value="2">
                <label for="q7-option2">can't have</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q7-option3" name="q7" value="3">
                <label for="q7-option3">wouldn't have</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="question" id="q8">
            <p class="mcq-question">8. "I'm not sure, but this _____ the right answer."</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q8-option0" name="q8" value="0">
                <label for="q8-option0">must be</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q8-option1" name="q8" value="1">
                <label for="q8-option1">might be</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q8-option2" name="q8" value="2">
                <label for="q8-option2">can be</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q8-option3" name="q8" value="3">
                <label for="q8-option3">will be</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="question" id="q9">
            <p class="mcq-question">9. "You _____ my brother. He's much taller than I am."</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q9-option0" name="q9" value="0">
                <label for="q9-option0">can't have met</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q9-option1" name="q9" value="1">
                <label for="q9-option1">must have met</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q9-option2" name="q9" value="2">
                <label for="q9-option2">might have met</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q9-option3" name="q9" value="3">
                <label for="q9-option3">will have met</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="question" id="q10">
            <p class="mcq-question">10. "I _____ to university. I regret it now."</p>
            <div class="options">
              <div class="option" data-index="0">
                <input type="radio" id="q10-option0" name="q10" value="0">
                <label for="q10-option0">should go</label>
              </div>
              <div class="option" data-index="1">
                <input type="radio" id="q10-option1" name="q10" value="1">
                <label for="q10-option1">should have gone</label>
              </div>
              <div class="option" data-index="2">
                <input type="radio" id="q10-option2" name="q10" value="2">
                <label for="q10-option2">must have gone</label>
              </div>
              <div class="option" data-index="3">
                <input type="radio" id="q10-option3" name="q10" value="3">
                <label for="q10-option3">could go</label>
              </div>
            </div>
            <div class="feedback"></div>
          </div>
          
          <div class="control-buttons">
            <button id="mcq-submit" class="submit-btn">Check Answers</button>
            <a href="#grammar-summary" id="check-grammar" class="nav-button">Review Grammar</a>
            <button id="mcq-restart" class="restart-btn" style="display:none;">Try Again</button>
          </div>
          
          <div class="score-display" id="mcq-results" style="display:none;">
            Your score: <span id="score-value">0</span>/10
          </div>
        </div>
      </section>
      
      <!-- Feedback Message Container -->
      <div id="completion-feedback"></div>
    </main>
  </div>
  
  <!-- BOTTOM NAVIGATION -->
  <nav class="bottom-navigation">
    <a href="modal-progressive.html" class="nav-button previous">‚Üê Previous: Modal Progressive Forms</a>
    <div class="center-buttons">
      <button class="nav-button print-button" onclick="window.print()">Print This Page</button>
      <a href="modal-advanced-practice.html" class="nav-button activities">Practice Activities</a>
    </div>
    <a href="modal-passive.html" class="nav-button next">Next: Modal Passive Forms ‚Üí</a>
  </nav>

  <!-- Include footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="../../home.html">Home</a></li>
          <li><a href="../../home.html#where-to-start">Grammar</a></li>
          <li><a href="../../extra-practice.html">Extra Practice</a></li>
          <li><a href="../../my-progress.html">My Progress</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Grammar Topics</h3>
        <ul>
          <li><a href="advanced-grammar.html#advanced-tenses-and-aspect">Advanced Tenses</a></li>
          <li><a href="advanced-grammar.html#conditionals">Advanced Conditionals</a></li>
          <li><a href="advanced-grammar.html#modals">Advanced Modal Verbs</a></li>
          <li><a href="advanced-grammar.html#passive">Advanced Passive Voice</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>Connect</h3>
        <ul>
          <li><a href="../../about.html">About</a></li>
          <li><a href="../../contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>¬© 2025 English in Doses | All rights reserved | <a href="../../license.html">Licensing Information</a></p>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="../../js/core.js"></script>
  <script src="../../js/mcq.js"></script>
  <script src="../../js/progress-tracking-module.js"></script>
  <script src="../../js/progress-manager-ui.js"></script>
  <script src="../../js/init-progress.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize MCQ Module
      MCQModule.init({
        containerId: 'mcq',
        answers: {
          'q1': 1,  // should have
          'q2': 0,  // must be
          'q3': 0,  // needn't have bought
          'q4': 3,  // can't be
          'q5': 1,  // could have taken
          'q6': 0,  // must be
          'q7': 2,  // can't have
          'q8': 1,  // might be
          'q9': 0,  // can't have met
          'q10': 1  // should have gone
        },
        explanations: {
          'q1': 'We use "should have + past participle" to express criticism or reproach about a past action.',
          'q2': 'When we are almost certain about a present situation, we use "must be".',
          'q3': '"Needn\'t have bought" is used for unnecessary actions that were done (bought too much food).',
          'q4': '"Can\'t be" expresses impossibility or negative certainty about the present.',
          'q5': '"Could have taken" expresses a missed opportunity or alternative in the past.',
          'q6': '"Must be" expresses a logical conclusion or strong probability about the present.',
          'q7': '"Can\'t have" expresses impossibility or negative certainty about the past.',
          'q8': '"Might be" expresses possibility (about 50% certainty) about the present.',
          'q9': '"Can\'t have met" expresses impossibility about the past.',
          'q10': '"Should have gone" expresses regret about a past action that didn\'t happen.'
        },
        showAllQuestionsAtOnce: true, // Show all questions at once
        onComplete: function(score, total) {
          console.log(`MCQ completed with score: ${score}/${total}`);
          
          // Track this activity completion in the progress system
          if (typeof ProgressTracker !== 'undefined') {
            // Mark the MCQ as completed in the 'activities' category
            ProgressTracker.markItemCompleted('activities', 'mcq-modal-advanced-meanings', {
              score: score,
              maxScore: total,
              completed: true,
              completedAt: new Date().toISOString(),
              title: 'Advanced Modal Meanings Quick Practice'
            });
            
            // Also mark the lesson itself as viewed/completed
            ProgressTracker.updateItemProgress('lessons', 'modal-advanced-meanings', {
              lastViewed: new Date().toISOString(),
              progress: 100, // Percent complete
              title: 'Advanced Modal Meanings' // Human-readable lesson title
            });
          }
          
          // Show completion feedback
          showCompletionFeedback(score, total);
        }
      });
      
      // Setup the "Check the Grammar" button
      const checkGrammarButton = document.getElementById('check-grammar');
      if (checkGrammarButton) {
        checkGrammarButton.addEventListener('click', function(e) {
          e.preventDefault();
          const summarySection = document.getElementById('grammar-summary');
          if (summarySection) {
            summarySection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      }
    });
    
    /**
     * Shows feedback to the user after completing the activity
     * 
     * @param {number} score - The score achieved
     * @param {number} total - The total possible score
     */
    function showCompletionFeedback(score, total) {
      // Calculate percentage
      const percentage = Math.round((score / total) * 100);
      
      // Create feedback element if it doesn't exist
      let feedbackElement = document.getElementById('completion-feedback');
      
      if (!feedbackElement) {
        feedbackElement = document.createElement('div');
        feedbackElement.id = 'completion-feedback';
        feedbackElement.className = 'feedback-message';
        feedbackElement.style.marginTop = '20px';
        feedbackElement.style.padding = '15px';
        feedbackElement.style.borderRadius = '5px';
        feedbackElement.style.textAlign = 'center';
        
        // Add it after the MCQ container
        const mcqContainer = document.getElementById('mcq');
        if (mcqContainer && mcqContainer.parentNode) {
          mcqContainer.parentNode.insertBefore(feedbackElement, mcqContainer.nextSibling);
        }
      }
      
      // Set content and style based on score
      if (percentage >= 80) {
        feedbackElement.style.backgroundColor = 'var(--success-bg, #d4edda)';
        feedbackElement.style.color = 'var(--success-color, #155724)';
        feedbackElement.innerHTML = `
          <h3>Great job! üéâ</h3>
          <p>You scored ${score}/${total} (${percentage}%). Your progress has been saved.</p>
          <p>You've mastered the advanced meanings of modal verbs! Try the practice activities to strengthen your skills.</p>
        `;
      } else if (percentage >= 60) {
        feedbackElement.style.backgroundColor = 'var(--note-bg, #fff3cd)';
        feedbackElement.style.color = 'var(--note-color, #856404)';
        feedbackElement.innerHTML = `
          <h3>Good effort! üëç</h3>
          <p>You scored ${score}/${total} (${percentage}%). Your progress has been saved.</p>
          <p>Review the modal meanings you found difficult before moving on to more complex activities.</p>
        `;
      } else {
        feedbackElement.style.backgroundColor = 'var(--error-bg, #f8d7da)';
        feedbackElement.style.color = 'var(--error-color, #721c24)';
        feedbackElement.innerHTML = `
          <h3>Keep practicing üí™</h3>
          <p>You scored ${score}/${total} (${percentage}%). Your progress has been saved.</p>
          <p>Modal verbs can be tricky! Review the grammar section again and pay special attention to the examples.</p>
        `;
      }
      
      // Scroll to feedback
      feedbackElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
  </script>
</body>
</html>